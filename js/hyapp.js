var Global={};
(function(b,d){Date.now||(Date.now=function(){return+new Date});Global.utility={win:b,doc:d,$:function(a){return d.querySelector(a)},$$:function(a){var a=d.querySelectorAll(a),b=[],c;c=0;for(len=a.length;c<len;c++)b[c]=a[c];return b},$id:function(a){return d.getElementById(a)},showElement:function(a){a.style.display="block"},hideElement:function(a){a.style.display="none"},override:function(a,b){for(var c in b)a[c]=b[c];return a},replaceAll:function(a,b,c){a=a.split(b);return a=a.join(c)}}})(window,document);
Global.DataStore=function(b){var d=Global.DataStore,a=Global.utility.override,e,b=a({single:!1},b);if(b.single&&d.instance)return d.instance;e={};a={setData:function(a,b){e[a]=b;return!0},getData:function(a){if(a)return e[a];var a={},b;for(b in e)a[b]=e[b];return a},resetData:function(){e={};return!0}};b.single&&(d.instance=a);return a};
Global.Event=function(b){var d=Global.Event,a=Global.utility.override,b=a({single:!1,isMobile:function(){return!1}},b);if(b.single&&d.instance)return d.instance;a={click:"click",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup"};b.isMobile()&&(a.click="touchstart",a.mousedown="touchstart",a.mousemove="touchmove",a.mouseup="touchend");b.single&&(d.instance=a);return a};
Global.ExternalInterface=function(b){var d=!1,a=null,e=null,c=new Global.HashController;b||(b={});b.android?(d=!0,a=b.android,Global.EXTERNAL={}):e={};return function(){var b;b=d?{call:function(b){a[b.mode](c.makeHash(b))},addCallback:function(a,b){Global.EXTERNAL[a]=function(a){a=c.parseHash(a);return b(a.vars)}},removeCallback:function(a){delete Global.EXTERNAL[a]}}:{call:function(a){c.setHash(a)},addCallback:function(a,b){e[a]=function(){var d=c.getHash();if(d.mode===a){b(d.vars);return true}return false};
window.addEventListener("hashchange",e[a])},removeCallback:function(a){window.removeEventListener("hashchange",e[a]);delete e[a]}};b.isAndroid=function(){return d};return b}()};
Global.FPS=function(b){function d(){m++;m===o&&(m=0,a());1===h&&p(d)}function a(){i=Date.now();j=Math.round(1E3/(i-g));g=i;k.enter()}var e=Global.FPS,c=Global.utility.override,b=c({single:!1,criterion:20},b);if(b.single&&e.instance)return e.instance;var c=Global.utility.win,f=b.criterion,j=f,n=b.enterframe,l=Math.round(1E3/f),g,i,h,k={getCriterion:function(){return f},getSurver:function(){return j},getFrameTime:function(){return l},enter:function(){n({criterion:f,surver:j})},start:function(){g=Date.now();
p?(h=1,d()):h=setInterval(a,l)},stop:function(){clearInterval(h);h=0}},m=0,o=Math.round(60/f)+1,p=c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame||c.oRequestAnimationFrame||c.msRequestAnimationFrame||!1;b.single&&(e.instance=k);return k};
Global.HashController=function(){var b={makeHash:function(b){var a="#"+b.mode,b=b.vars,e="?",c;for(c in b)a+=e+c+"="+JSON.stringify(b[c]),e="&";return encodeURI(a)},setHash:function(d){location.hash=b.makeHash(d);return!0},parseHash:function(b){var a,e=null;a=decodeURI(b).split("#")[1];if(!a)return!1;a=a.split("?");b=a[0];if(a[1]){e={};a=a[1].split("&");for(var c,f=a.length;f--;)a[f]&&(c=a[f].split("="),e[c[0]]=c[1].match("^{.*}$")?JSON.parse(c[1]):c[1].match("^[0-9.]+$")?1*c[1]:"true"===c[1]?!0:
"false"===c[1]?!1:c[1].match("^[\"'](.*)[\"']$")?c[1].match("^[\"'](.*)[\"']$")[1]:c[1]);return{mode:b,vars:e}}return{mode:b}},getHash:function(){return b.parseHash(location.hash)}};return b};Global.ImgLoad=function(b){var d=b.srcs,a=d.length,e=b.onload,c={start:function(){var b,e;for(e=a;e--;)b=new Image,b.src=d[e],b.onload=c.imgloaded},completeCheck:function(){return 0>=a?(e(),!0):!1}};return c};
Global.Loading=function(b){var d=Global.utility.win,a={onload:function(a){d.addEventListener("load",a)}};if(b&&b.onload)a.onload(b.onload);return a};
Global.Mobile=function(){function b(a){a.preventDefault();return!1}function d(a,b){a=a?a:c;return a.match(b)?!0:!1}var a=Global.utility.win,e=Global.utility.doc,c=navigator.userAgent,f={isAndroid:function(a){return d(a,/Android/i)},isIOS:function(a){return d(a,/iPhone|iPad|iPod/i)},isWindows:function(a){return d(a,/IEMobile/i)},isMobile:function(){return f.isAndroid()||f.isIOS()||f.isWindows()},killScroll:function(){a.scrollTo(0,1);e.addEventListener("touchmove",b)},revivalScroll:function(){a.scrollTo(0,
1);e.removeEventListener("touchmove",b)},hideAddress:function(){function b(){0===a.pageYOffset&&a.scrollTo(0,1)}function c(){setTimeout(b,100)}a.addEventListener("load",c,!1);a.addEventListener("orientationchange",c,!1)},orientationCheck:function(){return 90!==Math.abs(a.orientation)&&a.innerWidth<a.innerHeight?{portrait:!0,landscape:!1}:{portrait:!1,landscape:!0}},orientationChange:function(b){function c(b,e){a[b+"EventListener"]("load",e);a[b+"EventListener"]("orientationchange",e);a[b+"EventListener"]("resize",
e)}function d(){e();c("remove",d)}function e(){if(f.orientationCheck().portrait)return b.portrait(),!0;b.landscape()}b.immediately&&e();if(b.one)return c("add",d),function(){c("remove",d)};c("add",e);return function(){c("remove",e)}}};return f};Global.NumberImage=function(b){var d=b.type;d||(d="");return{make:function(a){var a=(""+a).split(""),b="",c;for(c=a.length;c--;)b='<span class="num_'+d+a[c]+'">&nbsp;</span>'+b;return b}}};
Global.Observer=function(b){var d=Global.Observer,a=Global.utility.override,b=a({single:!1},b);if(b.single&&d.instance)return d.instance;var e={},c={getObserved:function(){return e},on:function(a,b){e[a]||(e[a]=[]);e[a].push(b)},forOn:function(a){for(var b in a)c.on(b,a[b])},one:function(a,b){wrapfunc=function(e){b(e);c.off(a,wrapfunc)};c.on(a,wrapfunc)},off:function(a,b){if(!b)return delete e[a],!0;var c=e[a],d;if(!c)return!1;for(d=c.length;d--;)if(b===c[d])return c.splice(d,1),0===c.length&&delete e[a],
!0;return!1},forOff:function(a){for(var b in a)c.off(b,a[b])},fire:function(a,b){var c=e[a],d,g;if(!c)return!1;for(g=c.length;g--;)(d=c[g])&&d(b);return!0}};b.single&&(d.instance=c);return c};
Global.PreRender=function(b){var d=Global.utility,d=d.override,b=d({elements:[],guesslimit:30,looptime:100,loopblur:20,onrendered:function(){}},b),d=Global.utility,a=d.showElement,e=d.hideElement,c=b.elements,f=b.guesslimit,j=b.onrendered,n=b.looptime,l=n+b.loopblur,g,i,h={start:function(){for(var b=c.length;b--;)a(c[b]);i=Date.now();g=setInterval(h.check,n)},check:function(){var a=Date.now(),b=a-i;i=a;if(b<l&&(f--,1>f)){clearInterval(g);for(a=c.length;a--;)e(c[a]);j()}}};return h};
Global.Proxy=function(b){var d=b.delay,a=b.callback,e,c,f={request:function(a){e=a;f.clear();c=setTimeout(f.flush,d)},flush:function(){a(e)},clear:function(){clearInterval(c)}};return f};
Global.Timer=function(b){function d(){k=Date.now();var b=f-(k-h)/1E3;0>b&&(b=0);o=a(b);l(o);if(k>m)return q.stop(),g(),!0;p=setTimeout(d,n);return!1}function a(a){var b;b=(""+a).split(".");a=b[0];b=b[1]?b[1]:"";a=e({num:a,digit:i.integer});b=e({num:b,digit:i.few,isFew:!0});return a+"."+b}function e(a){var b=""+a.num,d=a.digit,e=d-b.length;return!a.isFew?-1<e?c(e,0)+b:c(d,9):0<e?b+c(e,0):b.slice(0,d)}function c(a,b){for(var c="",b=""+b;0<a;)c+=b,a--;return c}var f=b.limit,j=1E3*f,n=1E3*b.interval,
l=b.onupdate,g=b.ontimeup,i=function(a){a=a.split(".");return{integer:a[0].length,few:a[1].length}}(b.template),h=0,k=0,m=j,o=a(f),p,q={getLimit:function(){return f},getTime:function(){return o},getProgress:function(){return 1-(m-k)/j},setUpdate:function(a){l=a},setTimeup:function(a){g=a},countDown:function(){k=h=Date.now();m=h+j;d()},stop:function(){clearInterval(p)}};return q};

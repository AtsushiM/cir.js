var Global={};
(function(d,b){function e(c,a){var g=a.querySelectorAll(c),d=[],b,e;b=0;for(e=g.length;b<e;b++)d[b]=g[b];return d}function f(c){var a=""+c;return a.match("^{.*}$")?JSON.parse(a):a.match("^[0-9.]+$")?1*a:"true"===a?!0:"false"===a?!1:c}Date.now||(Date.now=function(){return+new Date});Global.utility={win:d,doc:b,body:b.body,$:function(c){return b.querySelector(c)},$$:function(c){return e(c,b)},$child:function(c,a){return a.querySelector(c)},$$child:e,$id:function(c){return b.getElementById(c)},scrollTop:function(){d.scrollTo(0,
1)},onEvent:function(c,a,g){c.addEventListener(a,g)},offEvent:function(c,a,g){c.removeEventListener(a,g)},createElement:function(c){return b.createElement(c)},showElement:function(c){c.style.display="block"},hideElement:function(c){c.style.display="none"},override:function(c,a){for(var g in a)c[g]=a[g];return c},replaceAll:function(c,a,g){return c.split(a).join(g)},windowOpen:function(c,a){return d.open(c,a)},typeCast:f,makeQueryString:function(c){var a="",g="",b;for(b in c)if(c[b]){g=g+(a+b+"="+
encodeURIComponent(c[b]));a="&"}return g},parseQueryString:function(c){var c=c.replace(/^\#/,"").replace(/^\?/,""),c=c.split("&"),a,b,d={};for(a=c.length;a--;){b=c[a].split("=");d[b[0]]=f(decodeURIComponent(b[1]))}return d}}})(window,document);
Global.Ajax=function(){var d=new XMLHttpRequest;return{request:function(b){var e=b.url,f=b.callback;b.cash||(e=e.match(/\?/)?e+"&":e+"?",e+="ajaxcash"+Date.now()+"=0");d=new XMLHttpRequest;d.onload=function(){f(d.responseText)};d.open("GET",e);d.send(null)},abort:function(){d.abort()}}};
Global.CanvasImage=function(d){var b=Global.utility.createElement,e=d.src,f=d.width,c=d.height,a=d.onload,g=b("img"),h=b("canvas");g.onload=function(){h.width=f;h.height=c;h.getContext("2d").drawImage(g,0,0);a(h,g)};g.src=e;return h};
Global.CanvasRender=function(d){var b=d.canvas,e=b.getContext("2d"),f=b.width,c=b.height,a,g,h,k={setSize:function(a){a.width&&(f=a.width,b.width=f);a.height&&(c=a.height,b.height=c)},draw:function(b){e.clearRect(0,0,f,c);a=0;for(g=b.length;a<g;a++)h=b[a],e.drawImage(h.image,h.x,h.y)}};k.setSize(d);return k};
Global.DataStore=function(d){var b=Global.DataStore,e=Global.utility.override,f,d=e({single:!1},d);if(d.single&&b.instance)return b.instance;f={};e={setData:function(c,a){f[c]=a;return!0},getData:function(c){if(c)return f[c];var c={},a;for(a in f)c[a]=f[a];return c},resetData:function(){f={};return!0}};d.single&&(b.instance=e);return e};
Global.Event=function(d){var b=Global.Event,e=Global.utility.override,d=e({single:!1,isMobile:function(){return!1}},d);if(d.single&&b.instance)return b.instance;e={click:"click",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup",touchstart:"touchstart",touchmove:"touchmove",touchend:"touchend",switchclick:"touchstart",switchdown:"touchstart",switchmove:"touchmove",switchup:"touchend"};d.isMobile()&&(e.switchclick="click",e.switchdown="mousedown",e.switchmove="mousemove",e.switchup="mouseup");
d.single&&(b.instance=e);return e};
Global.ExternalInterface=function(d){var b=!1,e=null,f=null,c=new Global.HashController;d||(d={});d.android?(b=!0,e=d.android,Global.EXTERNAL={}):f={};return function(){var a;a=b?{call:function(a){e[a.mode](c.makeHash(a))},addCallback:function(a,b){Global.EXTERNAL[a]=function(a){a=c.parseHash(a);return b(a.vars)}},removeCallback:function(a){delete Global.EXTERNAL[a]}}:{call:function(a){c.setHash(a)},addCallback:function(a,b){f[a]=function(){var d=c.getHash();if(d.mode===a){b(d.vars);return true}return false};
window.addEventListener("hashchange",f[a])},removeCallback:function(a){window.removeEventListener("hashchange",f[a]);delete f[a]}};a.isAndroid=function(){return b};return a}()};Global.Facebook=function(){var d=Global.utility.makeQueryString;return{getShareURL:function(b){var e="https://www.facebook.com/dialog/feed?app_id="+b.app_id+"&redirect_uri="+b.redirect_uri;return e+=d({link:b.link,picture:b.picture,name:b.name,caption:b.caption,description:b.description})}}};
Global.FPS=function(d){function b(){l++;l===q&&(l=0,e());1===j&&p(b)}function e(){m=Date.now();h=Math.round(1E3/(m-o));o=m;n.enter()}var f=Global.FPS,c=Global.utility,a=c.override,d=a({single:!1,criterion:20},d);if(d.single&&f.instance)return f.instance;var c=c.win,g=d.criterion,h=g,k=d.enterframe,i=Math.round(1E3/g),o,m,j,n={getCriterion:function(){return g},getSurver:function(){return h},getFrameTime:function(){return i},enter:function(){k({criterion:g,surver:h})},start:function(){o=Date.now();
p?(j=1,b()):j=setInterval(e,i)},stop:function(){clearInterval(j);j=0}},l=0,q=Math.round(60/g)+1,p=c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame||c.oRequestAnimationFrame||c.msRequestAnimationFrame||!1;d.single&&(f.instance=n);return n};
Global.HashController=function(){var d=Global.utility.typeCast,b={makeHash:function(b){var d="#"+b.mode,b=b.vars,c="?",a;for(a in b)d+=c+a+"="+JSON.stringify(b[a]),c="&";return encodeURI(d)},setHash:function(d){location.hash=b.makeHash(d);return!0},parseHash:function(b){var f,c=null;f=decodeURIComponent(b).split("#")[1];if(!f)return!1;f=f.split("?");b=f[0];if(f[1]){c={};f=f[1].split("&");var a,g;for(g=f.length;g--;)if(f[g]){a=f[g].split("=");var h=c,k=a[0];a=a[1];var i=d(a);a=a===i&&a.match("^[\"'](.*)[\"']$")?
a.match("^[\"'](.*)[\"']$")[1]:i;h[k]=a}return{mode:b,vars:c}}return{mode:b}},getHash:function(){return b.parseHash(location.hash)}};return b};Global.ImgLoad=function(d){function b(){g++;g>=c&&a()}var e=Global.utility.createElement,f=d.srcs,c=f.length,a=d.onload,g=0;return{start:function(){var a,d;for(d=c;d--;)a=e("img"),a.src=f[d],a.onload=b}}};Global.Loading=function(d){var b=Global.utility.win,e={onload:function(d){b.addEventListener("load",d)}};if(d&&d.onload)e.onload(d.onload);return e};
Global.Mobile=function(){function d(a){a.preventDefault();return!1}function b(a,b){a=a?a:k;return a.match(b)?!0:!1}var e=Global.utility,f=e.win,c=e.doc,a=e.onEvent,g=e.offEvent,h=e.scrollTop,k=navigator.userAgent,i={isAndroid:function(a){return b(a,/Android/i)},isIOS:function(a){return b(a,/iPhone|iPad|iPod/i)},isWindows:function(a){return b(a,/IEMobile/i)},isMobile:function(){return i.isAndroid()||i.isIOS()||i.isWindows()},killScroll:function(){h();a(c,"touchmove",d)},revivalScroll:function(){h();
g(c,"touchmove",d)},hideAddress:function(){function b(){0===f.pageYOffset&&h()}function c(){setTimeout(b,100)}a(f,"load",c,!1);a(f,"orientationchange",c,!1)},orientationCheck:function(){return 90!==Math.abs(f.orientation)&&f.innerWidth<f.innerHeight?{portrait:!0,landscape:!1}:{portrait:!1,landscape:!0}},orientationChange:function(b){function c(a,b){a(f,"load",b);a(f,"orientationchange",b);a(f,"resize",b)}function d(){e();c(g,d)}function e(){if(i.orientationCheck().portrait)return b.portrait(),!0;
b.landscape()}b.immediately&&e();if(b.one)return c(a,d),function(){c(g,d)};c(a,e);return function(){c(g,e)}}};return i};Global.NumberImage=function(d){var b=d.type;b||(b="");return{make:function(d){var d=(""+d).split(""),f="",c;for(c=d.length;c--;)f='<span class="num_'+b+d[c]+'">&nbsp;</span>'+f;return f}}};
Global.Observer=function(d){var b=Global.Observer,e=Global.utility.override,d=e({single:!1},d);if(d.single&&b.instance)return b.instance;var f={},c={getObserved:function(){return f},on:function(a,b){f[a]||(f[a]=[]);f[a].push(b)},forOn:function(a){for(var b in a)c.on(b,a[b])},one:function(a,b){wrapfunc=function(d){b(d);c.off(a,wrapfunc)};c.on(a,wrapfunc)},off:function(a,b){if(!b)return delete f[a],!0;var c=f[a],d;if(!c)return!1;for(d=c.length;d--;)if(b===c[d])return c.splice(d,1),0===c.length&&delete f[a],
!0;return!1},forOff:function(a){for(var b in a)c.off(b,a[b])},fire:function(a,b){var c=f[a],d,e;if(!c)return!1;for(e=c.length;e--;)(d=c[e])&&d(b);return!0}};d.single&&(b.instance=c);return c};
Global.PreRender=function(d){function b(){j=Date.now();n=j-l;l=j;if(n<o&&(h--,1>h)){clearInterval(m);for(var b=g.length;b--;)a(g[b]);k()}}var e=Global.utility,f=e.override,d=f({elements:[],guesslimit:30,looptime:100,loopblur:20,onrendered:function(){}},d),c=e.showElement,a=e.hideElement,g=d.elements,h=d.guesslimit,k=d.onrendered,i=d.looptime,o=i+d.loopblur,m,j,n,l;return{start:function(){var a;for(a=g.length;a--;)c(g[a]);l=Date.now();m=setInterval(b,i)}}};
Global.Surrogate=function(d){var b=d.delay,e=d.callback,f,c,a={request:function(d){f=d;a.clear();c=setTimeout(a.flush,b)},flush:function(){e(f)},clear:function(){clearInterval(c)}};return a};
Global.Timer=function(d){function b(){j=Date.now();var c=a-(j-m)/1E3;0>c&&(c=0);l=e(c);k(l);if(j>n)return p.stop(),i(),!0;q=setTimeout(b,h);return!1}function e(a){var b;b=(""+a).split(".");a=b[0];b=b[1]?b[1]:"";a=f({num:a,digit:o.integer});b=f({num:b,digit:o.few,isFew:!0});return a+"."+b}function f(a){var b=""+a.num,d=a.digit,e=d-b.length;return!a.isFew?-1<e?c(e,0)+b:c(d,9):0<e?b+c(e,0):b.slice(0,d)}function c(a,b){for(var c="",b=""+b;0<a;)c+=b,a--;return c}var a=d.limit,g=1E3*a,h=1E3*d.interval,
k=d.onupdate,i=d.ontimeup,o=function(a){a=a.split(".");return{integer:a[0].length,few:a[1].length}}(d.template),m=0,j=0,n=g,l=e(a),q,p={getLimit:function(){return a},getTime:function(){return l},getProgress:function(){return 1-(n-j)/g},setUpdate:function(a){k=a},setTimeup:function(a){i=a},countDown:function(){j=m=Date.now();n=m+g;b()},stop:function(){clearInterval(q)}};return p};
Global.Twitter=function(){var d=Global.utility.makeQueryString;return{getShareURL:function(b){var e=b.redirect_uri,f=b.caption||"",c=b.name||"",b=b.hash||"";c&&(c=" \u300c"+c+"\u300d");b&&(b=" "+b);return e="https://twitter.com/intent/tweet?"+d({url:e,text:f+c+b})}}};
Global.XML=function(d){var b=Global.utility,e=b.$child,f=b.$$child,c=b.createElement("div"),a=d.data;a&&(c.innerHTML=a);return{getData:function(){return a},setData:function(b){a=c.innerHTML=b},$:function(a){return e(a,c)},$$:function(a){return f(a,c)}}};

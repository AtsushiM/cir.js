var Global={};(function(b,c){Date.now||(Date.now=function(){return+new Date});Global.utility={win:b,doc:c,$:function(a){return c.querySelector(a)},$$:function(a){for(var a=c.querySelectorAll(a),e=[],d=0,f=a.length;d<f;d++)e[d]=a[d];return e},showElement:function(a){a.style.display="block"},hideElement:function(a){a.style.display="none"},override:function(a,c){for(var d in c)a[d]=c[d];return a},replaceAll:function(a,c,d){a=a.split(c);return a=a.join(d)}}})(window,document);
Global.DataStore=function(b){var c=Global.DataStore,a=Global.utility.override,e,b=a({single:!1},b);if(b.single&&c.instance)return c.instance;e={};a={setData:function(a,f){e[a]=f;return!0},getData:function(a){if(a)return e[a];var a={},f;for(f in e)a[f]=e[f];return a},resetData:function(){e={};return!0}};b.single&&(c.instance=a);return a};
Global.Event=function(b){var c=Global.Event,a=Global.utility.override,b=a({single:!1,isMobile:function(){return!1}},b);if(b.single&&c.instance)return c.instance;a={click:"click",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup"};b.isMobile()&&(a.click="touchstart",a.mousedown="touchstart",a.mousemove="touchmove",a.mouseup="touchend");b.single&&(c.instance=a);return a};
Global.ExternalInterface=function(b){var c=!1,a=null,e=null,d=new Global.HashController;b||(b={});b.android?(c=!0,a=b.android,Global.EXTERNAL={}):e={};return function(){var f;f=c?{call:function(f){a[f.mode](d.makeHash(f))},addCallback:function(a,f){Global.EXTERNAL[a]=function(a){a=d.parseHash(a);return f(a.vars)}},removeCallback:function(a){delete Global.EXTERNAL[a]}}:{call:function(a){d.setHash(a)},addCallback:function(a,f){e[a]=function(){var c=d.getHash();if(c.mode===a){f(c.vars);return true}return false};
window.addEventListener("hashchange",e[a])},removeCallback:function(a){window.removeEventListener("hashchange",e[a]);delete e[a]}};f.isAndroid=function(){return c};return f}()};
Global.FPS=function(b){function c(){g=Date.now();f=Math.round(1E3/(g-k));k=g;h.enter()}var a=Global.FPS,e=Global.utility.override,b=e({single:!1,criterion:20},b);if(b.single&&a.instance)return a.instance;var d=b.criterion,f=d,i=b.enterframe,m=Math.round(1E3/d),k,g,j,h={getCriterion:function(){return d},getSurver:function(){return f},getFrameTime:function(){return m},enter:function(){i({criterion:h.getCriterion(),surver:h.getSurver()})},start:function(){k=Date.now();j=setInterval(c,m)},stop:function(){clearInterval(j)}};
b.single&&(a.instance=h);return h};
Global.HashController=function(){var b={makeHash:function(c){var a="#"+c.mode,c=c.vars,b="?",d;for(d in c)a+=b+d+"="+JSON.stringify(c[d]),b="&";return encodeURI(a)},setHash:function(c){location.hash=b.makeHash(c);return!0},parseHash:function(c){var a,b=null;a=decodeURI(c).split("#")[1];if(!a)return!1;a=a.split("?");c=a[0];if(a[1]){b={};a=a[1].split("&");for(var d,f=0,i=a.length;f<i;f++)a[f]&&(d=a[f].split("="),b[d[0]]=d[1].match("^{.*}$")?JSON.parse(d[1]):d[1].match("^[0-9.]+$")?1*d[1]:"true"===d[1]?
!0:"false"===d[1]?!1:d[1].match("^[\"'](.*)[\"']$")?d[1].match("^[\"'](.*)[\"']$")[1]:d[1]);return{mode:c,vars:b}}return{mode:c}},getHash:function(){return b.parseHash(location.hash)}};return b};Global.Loading=function(b){var c=Global.utility.win,a={onload:function(a){c.addEventListener("load",a)}};if(b&&b.onload)a.onload(b.onload);return a};
Global.Mobile=function(){function b(a){a.preventDefault();return!1}var c=Global.utility.win,a=Global.utility.doc,e=navigator.userAgent,d={isAndroid:function(a){a=a?a:e;return a.match(/Android/i)?!0:!1},isIOS:function(a){a=a?a:e;return a.match(/iPhone|iPad|iPod/i)?!0:!1},isWindows:function(a){a=a?a:e;return a.match(/IEMobile/i)?!0:!1},isMobile:function(){return d.isAndroid()||d.isIOS()||d.isWindows()},killScroll:function(){a.addEventListener("touchmove",b)},hideAddress:function(){function a(){0===
c.pageYOffset&&c.scrollTo(0,1)}function b(){setTimeout(a,100)}c.addEventListener("load",b,!1);c.addEventListener("orientationchange",b,!1)},orientationChange:function(a){function b(){if(90!==Math.abs(c.orientation)&&c.innerWidth<c.innerHeight)return a.portrait(),!0;a.landscape()}c.addEventListener("load",b);c.addEventListener("orientationchange",b);c.addEventListener("resize",b)}};return d};
Global.NumberImage=function(b){var c=b.type;c||(c="");return{make:function(a){for(var a=(""+a).split(""),b="",d=0,f=a.length;d<f;d++)b+='<span class="num_'+c+a[d]+'">&nbsp;</span>';return b}}};
Global.Observer=function(b){var c=Global.Observer,a=Global.utility.override,b=a({single:!1},b);if(b.single&&c.instance)return c.instance;var e={},d={getObserved:function(){return e},on:function(a,b){e[a]||(e[a]=[]);e[a].push(b)},forOn:function(a){for(var b in a)d.on(b,a[b])},one:function(a,b){wrapfunc=function(c){b(c);d.off(a,wrapfunc)};d.on(a,wrapfunc)},off:function(a,b){if(!b)return delete e[a],!0;var c=e[a];if(!c)return!1;for(var d=0,g=c.length;d<g;d++)if(b===c[d])return c.splice(d,1),0===c.length&&
delete e[a],!0;return!1},forOff:function(a){for(var b in a)d.off(b,a[b])},fire:function(a,b){var c=e[a],d;if(!c)return!1;for(var g=0,j=c.length;g<j;g++)(d=c[g])&&d(b);return!0}};b.single&&(c.instance=d);return d};Global.Proxy=function(b){var c=b.delay,a=b.callback,e,d,f={request:function(a){e=a;f.clear();d=setTimeout(f.flush,c)},flush:function(){a(e)},clear:function(){clearInterval(d)}};return f};
Global.Timer=function(b){function c(){l=Date.now();var b=f-(l-h)/1E3;0>b&&(b=0);n=a(b);k(n);if(l>o)return p.stop(),g(),!0;q=setTimeout(c,m);return!1}function a(a){var b;b=(""+a).split(".");a=b[0];b=b[1]?b[1]:"";a=e({num:a,digit:j.integer});b=e({num:b,digit:j.few,isFew:!0});return a+"."+b}function e(a){var b=""+a.num,c=a.digit,e=c-b.length;return!a.isFew?0<e?d(e,0)+b:d(c,9):0<e?b+d(e,0):b.slice(0,c)}function d(a,b){for(var c="",b=""+b;0<a;)c+=b,a--;return c}var f=b.limit,i=1E3*f,m=1E3*b.interval,k=
b.onupdate,g=b.ontimeup,j=function(a){a=a.split(".");return{integer:a[0].length,few:a[1].length}}(b.template),h=0,l=0,o=i,n=a(f),q,p={getTime:function(){return n},getProgress:function(){return 1-(o-l)/i},setUpdate:function(a){k=a},setTimeup:function(a){g=a},countDown:function(){l=h=Date.now();o=h+i;c()},stop:function(){clearInterval(q)}};return p};

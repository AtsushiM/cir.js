var Global={};
(function(b,e){Date.now||(Date.now=function(){return+new Date});Global.utility={win:b,doc:e,$:function(a){return e.querySelector(a)},$$:function(a){for(var a=e.querySelectorAll(a),c=[],d=0,f=a.length;d<f;d++)c[d]=a[d];return c},$id:function(a){return e.getElementById(a)},showElement:function(a){a.style.display="block"},hideElement:function(a){a.style.display="none"},override:function(a,c){for(var d in c)a[d]=c[d];return a},replaceAll:function(a,c,d){a=a.split(c);return a=a.join(d)}}})(window,document);
Global.DataStore=function(b){var e=Global.DataStore,a=Global.utility.override,c,b=a({single:!1},b);if(b.single&&e.instance)return e.instance;c={};a={setData:function(a,f){c[a]=f;return!0},getData:function(a){if(a)return c[a];var a={},f;for(f in c)a[f]=c[f];return a},resetData:function(){c={};return!0}};b.single&&(e.instance=a);return a};
Global.Event=function(b){var e=Global.Event,a=Global.utility.override,b=a({single:!1,isMobile:function(){return!1}},b);if(b.single&&e.instance)return e.instance;a={click:"click",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup"};b.isMobile()&&(a.click="touchstart",a.mousedown="touchstart",a.mousemove="touchmove",a.mouseup="touchend");b.single&&(e.instance=a);return a};
Global.ExternalInterface=function(b){var e=!1,a=null,c=null,d=new Global.HashController;b||(b={});b.android?(e=!0,a=b.android,Global.EXTERNAL={}):c={};return function(){var f;f=e?{call:function(g){a[g.mode](d.makeHash(g))},addCallback:function(a,c){Global.EXTERNAL[a]=function(a){a=d.parseHash(a);return c(a.vars)}},removeCallback:function(a){delete Global.EXTERNAL[a]}}:{call:function(a){d.setHash(a)},addCallback:function(a,f){c[a]=function(){var c=d.getHash();if(c.mode===a){f(c.vars);return true}return false};
window.addEventListener("hashchange",c[a])},removeCallback:function(a){window.removeEventListener("hashchange",c[a]);delete c[a]}};f.isAndroid=function(){return e};return f}()};
Global.FPS=function(b){function e(){h=Date.now();f=Math.round(1E3/(h-j));j=h;i.enter()}var a=Global.FPS,c=Global.utility.override,b=c({single:!1,criterion:20},b);if(b.single&&a.instance)return a.instance;var d=b.criterion,f=d,g=b.enterframe,m=Math.round(1E3/d),j,h,k,i={getCriterion:function(){return d},getSurver:function(){return f},getFrameTime:function(){return m},enter:function(){g({criterion:i.getCriterion(),surver:i.getSurver()})},start:function(){j=Date.now();k=setInterval(e,m)},stop:function(){clearInterval(k)}};
b.single&&(a.instance=i);return i};
Global.HashController=function(){var b={makeHash:function(b){var a="#"+b.mode,b=b.vars,c="?",d;for(d in b)a+=c+d+"="+JSON.stringify(b[d]),c="&";return encodeURI(a)},setHash:function(e){location.hash=b.makeHash(e);return!0},parseHash:function(b){var a,c=null;a=decodeURI(b).split("#")[1];if(!a)return!1;a=a.split("?");b=a[0];if(a[1]){c={};a=a[1].split("&");for(var d,f=0,g=a.length;f<g;f++)a[f]&&(d=a[f].split("="),c[d[0]]=d[1].match("^{.*}$")?JSON.parse(d[1]):d[1].match("^[0-9.]+$")?1*d[1]:"true"===d[1]?
!0:"false"===d[1]?!1:d[1].match("^[\"'](.*)[\"']$")?d[1].match("^[\"'](.*)[\"']$")[1]:d[1]);return{mode:b,vars:c}}return{mode:b}},getHash:function(){return b.parseHash(location.hash)}};return b};Global.Loading=function(b){var e=Global.utility.win,a={onload:function(a){e.addEventListener("load",a)}};if(b&&b.onload)a.onload(b.onload);return a};
Global.Mobile=function(){function b(a){a.preventDefault();return!1}function e(a,b){a=a?a:d;return a.match(b)?!0:!1}var a=Global.utility.win,c=Global.utility.doc,d=navigator.userAgent,f={isAndroid:function(a){return e(a,/Android/i)},isIOS:function(a){return e(a,/iPhone|iPad|iPod/i)},isWindows:function(a){return e(a,/IEMobile/i)},isMobile:function(){return f.isAndroid()||f.isIOS()||f.isWindows()},killScroll:function(){a.scrollTo(0,1);c.addEventListener("touchmove",b)},revivalScroll:function(){a.scrollTo(0,
1);c.removeEventListener("touchmove",b)},hideAddress:function(){function b(){0===a.pageYOffset&&a.scrollTo(0,1)}function c(){setTimeout(b,100)}a.addEventListener("load",c,!1);a.addEventListener("orientationchange",c,!1)},orientationChange:function(b){function c(){if(90!==Math.abs(a.orientation)&&a.innerWidth<a.innerHeight)return b.portrait(),!0;b.landscape()}a.addEventListener("load",c);a.addEventListener("orientationchange",c);a.addEventListener("resize",c)}};return f};
Global.NumberImage=function(b){var e=b.type;e||(e="");return{make:function(a){for(var a=(""+a).split(""),b="",d=0,f=a.length;d<f;d++)b+='<span class="num_'+e+a[d]+'">&nbsp;</span>';return b}}};
Global.Observer=function(b){var e=Global.Observer,a=Global.utility.override,b=a({single:!1},b);if(b.single&&e.instance)return e.instance;var c={},d={getObserved:function(){return c},on:function(a,b){c[a]||(c[a]=[]);c[a].push(b)},forOn:function(a){for(var b in a)d.on(b,a[b])},one:function(a,b){wrapfunc=function(c){b(c);d.off(a,wrapfunc)};d.on(a,wrapfunc)},off:function(a,b){if(!b)return delete c[a],!0;var d=c[a];if(!d)return!1;for(var e=d.length;e--;)if(b===d[e])return d.splice(e,1),0===d.length&&delete c[a],
!0;return!1},forOff:function(a){for(var b in a)d.off(b,a[b])},fire:function(a,b){var d=c[a],e;if(!d)return!1;for(var h=d.length;h--;)(e=d[h])&&e(b);return!0}};b.single&&(e.instance=d);return d};Global.Proxy=function(b){var e=b.delay,a=b.callback,c,d,f={request:function(a){c=a;f.clear();d=setTimeout(f.flush,e)},flush:function(){a(c)},clear:function(){clearInterval(d)}};return f};
Global.Timer=function(b){function e(){l=Date.now();var b=f-(l-i)/1E3;0>b&&(b=0);n=a(b);j(n);if(l>o)return p.stop(),h(),!0;q=setTimeout(e,m);return!1}function a(a){var b;b=(""+a).split(".");a=b[0];b=b[1]?b[1]:"";a=c({num:a,digit:k.integer});b=c({num:b,digit:k.few,isFew:!0});return a+"."+b}function c(a){var b=""+a.num,c=a.digit,e=c-b.length;return!a.isFew?0<e?d(e,0)+b:d(c,9):0<e?b+d(e,0):b.slice(0,c)}function d(a,b){for(var c="",b=""+b;0<a;)c+=b,a--;return c}var f=b.limit,g=1E3*f,m=1E3*b.interval,j=
b.onupdate,h=b.ontimeup,k=function(a){a=a.split(".");return{integer:a[0].length,few:a[1].length}}(b.template),i=0,l=0,o=g,n=a(f),q,p={getTime:function(){return n},getProgress:function(){return 1-(o-l)/g},setUpdate:function(a){j=a},setTimeup:function(a){h=a},countDown:function(){l=i=Date.now();o=i+g;e()},stop:function(){clearInterval(q)}};return p};

var Global={};
(function(a,d){function f(c,b){var g=b.querySelectorAll(c),d=[],a,f;a=0;for(f=g.length;a<f;a++)d[a]=g[a];return d}function e(c){var b=""+c;return b.match("^{.*}$")?JSON.parse(b):b.match("^[0-9.]+$")?1*b:"true"===b?!0:"false"===b?!1:c}Date.now||(Date.now=function(){return+new Date});Global.utility={win:a,doc:d,body:d.body,$:function(c){return d.querySelector(c)},$$:function(c){return f(c,d)},$child:function(c,b){return b.querySelector(c)},$$child:f,$id:function(c){return d.getElementById(c)},scrollTop:function(){a.scrollTo(0,
1)},onEvent:function(c,b,g){c.addEventListener(b,g)},offEvent:function(c,b,g){c.removeEventListener(b,g)},createElement:function(c){return d.createElement(c)},showElement:function(c){c.style.display="block"},hideElement:function(c){c.style.display="none"},override:function(c,b){for(var g in b)c[g]=b[g];return c},replaceAll:function(c,b,g){return c.split(b).join(g)},windowOpen:function(c,b){return a.open(c,b)},typeCast:e,makeQueryString:function(c){var b="",g="",a;for(a in c)if(c[a]){g=g+(b+a+"="+
encodeURIComponent(c[a]));b="&"}return g},parseQueryString:function(c){var c=c.replace(/^\#/,"").replace(/^\?/,""),c=c.split("&"),b,a,d={};for(b=c.length;b--;){a=c[b].split("=");d[a[0]]=e(decodeURIComponent(a[1]))}return d}}})(window,document);
Global.Ajax=function(){var a=new XMLHttpRequest;return{request:function(d){var f=d.url,e=d.callback;d.cash||(f=f.match(/\?/)?f+"&":f+"?",f+="ajaxcash"+Date.now()+"=0");a=new XMLHttpRequest;a.onload=function(){e(a.responseText)};a.open("GET",f);a.send(null)},abort:function(){a.abort()}}};
Global.CanvasImage=function(a){var d=Global.utility.createElement,f=a.src,e=a.width,c=a.height,b=a.onload,g=d("img"),h=d("canvas");g.onload=function(){h.width=e;h.height=c;h.getContext("2d").drawImage(g,0,0);b(h,g)};g.src=f;return h};
Global.CanvasRender=function(a){var d=a.canvas,f=d.getContext("2d"),e=d.width,c=d.height,b,g,h,k={setSize:function(b){b.width&&(e=b.width,d.width=e);b.height&&(c=b.height,d.height=c)},draw:function(a){f.clearRect(0,0,e,c);b=0;for(g=a.length;b<g;b++)h=a[b],f.drawImage(h.image,h.x,h.y)}};k.setSize(a);return k};
Global.DataStore=function(a){var d=Global.DataStore,f=Global.utility.override,e,a=f({single:!1},a);if(a.single&&d.instance)return d.instance;e={};f={setData:function(c,b){e[c]=b;return!0},getData:function(c){if(c)return e[c];var c={},b;for(b in e)c[b]=e[b];return c},resetData:function(){e={};return!0}};a.single&&(d.instance=f);return f};
Global.Event=function(a){var d=Global.Event,f=Global.utility.override,a=f({single:!1,isMobile:function(){return!1}},a);if(a.single&&d.instance)return d.instance;f={click:"click",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup",touchstart:"touchstart",touchmove:"touchmove",touchend:"touchend",switchclick:"touchstart",switchdown:"touchstart",switchmove:"touchmove",switchup:"touchend"};a.isMobile()||(f.switchclick="click",f.switchdown="mousedown",f.switchmove="mousemove",f.switchup="mouseup");
a.single&&(d.instance=f);return f};
Global.ExternalInterface=function(a){var d=!1,f=null,e=null,c=new Global.HashController;a||(a={});a.android?(d=!0,f=a.android,Global.EXTERNAL={}):e={};return function(){var b;b=d?{call:function(b){f[b.mode](c.makeHash(b))},addCallback:function(b,a){Global.EXTERNAL[b]=function(b){b=c.parseHash(b);return a(b.vars)}},removeCallback:function(b){delete Global.EXTERNAL[b]}}:{call:function(b){c.setHash(b)},addCallback:function(b,a){e[b]=function(){var d=c.getHash();if(d.mode===b){a(d.vars);return true}return false};
window.addEventListener("hashchange",e[b])},removeCallback:function(b){window.removeEventListener("hashchange",e[b]);delete e[b]}};b.isAndroid=function(){return d};return b}()};Global.Facebook=function(){var a=Global.utility.makeQueryString;return{getShareURL:function(d){var f="https://www.facebook.com/dialog/feed?app_id="+d.app_id+"&redirect_uri="+d.redirect_uri;return f+=a({link:d.link,picture:d.picture,name:d.name,caption:d.caption,description:d.description})}}};
Global.FPS=function(a){function d(){l++;l===q&&(l=0,f());1===j&&p(d)}function f(){m=Date.now();h=Math.round(1E3/(m-o));o=m;n.enter()}var e=Global.FPS,c=Global.utility,b=c.override,a=b({single:!1,criterion:20},a);if(a.single&&e.instance)return e.instance;var c=c.win,g=a.criterion,h=g,k=a.enterframe,i=Math.round(1E3/g),o,m,j,n={getCriterion:function(){return g},getSurver:function(){return h},getFrameTime:function(){return i},enter:function(){k({criterion:g,surver:h})},start:function(){o=Date.now();
p?(j=1,d()):j=setInterval(f,i)},stop:function(){clearInterval(j);j=0}},l=0,q=Math.round(60/g)+1,p=c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame||c.oRequestAnimationFrame||c.msRequestAnimationFrame||!1;a.single&&(e.instance=n);return n};
Global.HashController=function(){var a=Global.utility.typeCast,d={makeHash:function(a){var d="#"+a.mode,a=a.vars,c="?",b;for(b in a)d+=c+b+"="+JSON.stringify(a[b]),c="&";return encodeURI(d)},setHash:function(a){location.hash=d.makeHash(a);return!0},parseHash:function(d){var e,c=null;e=decodeURIComponent(d).split("#")[1];if(!e)return!1;e=e.split("?");d=e[0];if(e[1]){c={};e=e[1].split("&");var b,g;for(g=e.length;g--;)if(e[g]){b=e[g].split("=");var h=c,k=b[0];b=b[1];var i=a(b);b=b===i&&b.match("^[\"'](.*)[\"']$")?
b.match("^[\"'](.*)[\"']$")[1]:i;h[k]=b}return{mode:d,vars:c}}return{mode:d}},getHash:function(){return d.parseHash(location.hash)}};return d};Global.ImgLoad=function(a){function d(){g++;g>=c&&b()}var f=Global.utility.createElement,e=a.srcs,c=e.length,b=a.onload,g=0;return{start:function(){var b,a;for(a=c;a--;)b=f("img"),b.src=e[a],b.onload=d}}};Global.Loading=function(a){var d=Global.utility.win,f={onload:function(a){d.addEventListener("load",a)}};if(a&&a.onload)f.onload(a.onload);return f};
Global.Mobile=function(){function a(b){b.preventDefault();return!1}function d(b,a){b=b?b:k;return b.match(a)?!0:!1}var f=Global.utility,e=f.win,c=f.doc,b=f.onEvent,g=f.offEvent,h=f.scrollTop,k=navigator.userAgent,i={isAndroid:function(b){return d(b,/Android/i)},isIOS:function(b){return d(b,/iPhone|iPad|iPod/i)},isWindows:function(b){return d(b,/IEMobile/i)},isMobile:function(){return i.isAndroid()||i.isIOS()||i.isWindows()},killScroll:function(){h();b(c,"touchmove",a)},revivalScroll:function(){h();
g(c,"touchmove",a)},hideAddress:function(){function a(){0===e.pageYOffset&&h()}function c(){setTimeout(a,100)}b(e,"load",c,!1);b(e,"orientationchange",c,!1)},orientationCheck:function(){return 90!==Math.abs(e.orientation)&&e.innerWidth<e.innerHeight?{portrait:!0,landscape:!1}:{portrait:!1,landscape:!0}},orientationChange:function(a){function c(b,a){b(e,"load",a);b(e,"orientationchange",a);b(e,"resize",a)}function d(){f();c(g,d)}function f(){if(i.orientationCheck().portrait)return a.portrait(),!0;
a.landscape()}a.immediately&&f();if(a.one)return c(b,d),function(){c(g,d)};c(b,f);return function(){c(g,f)}}};return i};Global.NumberImage=function(a){var d=a.type;d||(d="");return{make:function(a){var a=(""+a).split(""),e="",c;for(c=a.length;c--;)e='<span class="num_'+d+a[c]+'">&nbsp;</span>'+e;return e}}};
Global.Observer=function(a){var d=Global.Observer,f=Global.utility.override,a=f({single:!1},a);if(a.single&&d.instance)return d.instance;var e={},c={getObserved:function(){return e},on:function(b,a){e[b]||(e[b]=[]);e[b].push(a)},forOn:function(b){for(var a in b)c.on(a,b[a])},one:function(b,a){wrapfunc=function(d){a(d);c.off(b,wrapfunc)};c.on(b,wrapfunc)},off:function(b,a){if(!a)return delete e[b],!0;var c=e[b],d;if(!c)return!1;for(d=c.length;d--;)if(a===c[d])return c.splice(d,1),0===c.length&&delete e[b],
!0;return!1},forOff:function(a){for(var d in a)c.off(d,a[d])},fire:function(a,c){var d=e[a],f,i;if(!d)return!1;for(i=d.length;i--;)(f=d[i])&&f(c);return!0}};a.single&&(d.instance=c);return c};
Global.PreRender=function(a){function d(){j=Date.now();n=j-l;l=j;if(n<o&&(h--,1>h)){clearInterval(m);for(var a=g.length;a--;)b(g[a]);k()}}var f=Global.utility,e=f.override,a=e({elements:[],guesslimit:30,looptime:100,loopblur:20,onrendered:function(){}},a),c=f.showElement,b=f.hideElement,g=a.elements,h=a.guesslimit,k=a.onrendered,i=a.looptime,o=i+a.loopblur,m,j,n,l;return{start:function(){var a;for(a=g.length;a--;)c(g[a]);l=Date.now();m=setInterval(d,i)}}};
Global.Surrogate=function(a){var d=a.delay,f=a.callback,e,c,b={request:function(a){e=a;b.clear();c=setTimeout(b.flush,d)},flush:function(){f(e)},clear:function(){clearInterval(c)}};return b};
Global.Timer=function(a){function d(){j=Date.now();var a=b-(j-m)/1E3;0>a&&(a=0);l=f(a);k(l);if(j>n)return p.stop(),i(),!0;q=setTimeout(d,h);return!1}function f(a){var b;b=(""+a).split(".");a=b[0];b=b[1]?b[1]:"";a=e({num:a,digit:o.integer});b=e({num:b,digit:o.few,isFew:!0});return a+"."+b}function e(a){var b=""+a.num,d=a.digit,e=d-b.length;return!a.isFew?-1<e?c(e,0)+b:c(d,9):0<e?b+c(e,0):b.slice(0,d)}function c(a,b){for(var c="",b=""+b;0<a;)c+=b,a--;return c}var b=a.limit,g=1E3*b,h=1E3*a.interval,
k=a.onupdate,i=a.ontimeup,o=function(a){a=a.split(".");return{integer:a[0].length,few:a[1].length}}(a.template),m=0,j=0,n=g,l=f(b),q,p={getLimit:function(){return b},getTime:function(){return l},getProgress:function(){return 1-(n-j)/g},setUpdate:function(a){k=a},setTimeup:function(a){i=a},countDown:function(){j=m=Date.now();n=m+g;d()},stop:function(){clearInterval(q)}};return p};
Global.Twitter=function(){var a=Global.utility.makeQueryString;return{getShareURL:function(d){var f=d.redirect_uri,e=d.caption||"",c=d.name||"",d=d.hash||"";c&&(c=" \u300c"+c+"\u300d");d&&(d=" "+d);return f="https://twitter.com/intent/tweet?"+a({url:f,text:e+c+d})}}};
Global.XML=function(a){var d=Global.utility,f=d.$child,e=d.$$child,c=d.createElement("div"),b,d={getData:function(){return b},setData:function(a){b=c.innerHTML=a},$:function(a){return f(a,c)},$$:function(a){return e(a,c)}};a&&a.data&&d.setData(a.data);return d};

/*! cir.js v0.8.4 | (c) 2013 Atsushi Mizoue. */(function(){
function f(a){return function(){return this[a]}}function aa(a,b){for(var c=j("p"),d=k,e,g=l,h=a.length,p,q=RegExp("^(.*?)"+a[0]+"$","i");h--;)if(c.style[a[h]]!==m){d=n;(e=a[h].match(q)[1])?(g=e.toLowerCase(),b=g+b,g="-"+g+"-"):b=b.toLowerCase();c=r(ba("head"),j("style",{type:"text/css"}));p=c.sheet;break}return{ga:b,ra:d,prefix:e,da:g,sheet:p}}function s(a){return t.JSON.parse(a)}function ca(a){return t.JSON.stringify(a)}function u(){return Date.now()}function v(){t.scrollTo(0,1)}
function da(a,b){for(var c in b)a[c]=b[c];return a}function ea(a){var b=l+a;return b.match("^{.*}$")?s(b):b.match("^[0-9.]+$")?1*b:"true"===b?n:"false"===b?k:a}function fa(a,b,c){return a.split(b).join(c)}function ga(a){var b=l,c=l,d;for(d in a)a[d]&&(c+=b+d+"="+encodeURIComponent(a[d]),b="&");return c}function w(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"?n:k}function ha(a){return w("Object",a)}function x(a){return w("Number",a)}function ia(a){return w("String",a)}
function y(a){return w("Function",a)}function ja(a){return w("Boolean",a)}function ka(a){return w("Array",a)}function la(){return"ontouchstart"in t}function z(){}function ma(a){a.preventDefault();return k}function A(a,b){b=b||navigator.userAgent;return!!b.match(a)}function na(a,b){return function(){return b.apply(a,arguments)}}function oa(a,b,c){b=b||a;c=c||b;for(i in b)y(b[i])&&(c[i]=na(a,b[i]));da(a,c);return c}function ba(a){return B.querySelector(a)}
function pa(a,b){var c=b.querySelectorAll(a),d=[];d.push.apply(d,c);return d}function D(a,b){for(var c=a.className,c=c?c.split(" "):[],d=c.length;d--;)if(b===c[d])return n;return k}function E(a,b){var c=l,d=a.className;if(D(a,b))return k;d&&(c=" ");a.className=d+c+b}function F(a,b){var c,d=[],e;if(!D(a,b))return k;c=a.className.split(" ");for(e=c.length;e--;)b!==c[e]&&d.push(c[e]);a.className=d.join(" ");return n}function qa(a,b){return D(a,b)?F(a,b):E(a,b)}
function ra(a,b,c){var d;if(ha(b)){for(d in b)a.setAttribute(d,b[d]);return n}return c||c===l?a.setAttribute(b,c):a.getAttribute(b)}function sa(a,b){a.removeAttribute(b)}function j(a,b){var c=B.createElement(a);b&&ra(c,b);return c}function H(a,b,c){a.addEventListener(b,c,k)}function I(a,b,c){a.removeEventListener(b,c,k)}function ta(a){a.style.display="block"}function ua(a){a.style.display="none"}function va(a,b){a.style.opacity=b}
function J(a,b){var c=a.style,d,e,g;for(d in b)e=d,g=b[d],x(g)&&(g+="px"),c[e]=g}function wa(a){return B.defaultView.getComputedStyle(a,K)}function L(a){return a.parentNode}function r(a,b){return a.appendChild(b)}function xa(a,b){return L(a).insertBefore(b,a)}function ya(a,b){return L(a).insertBefore(b,a.nextSibling)}function za(a){return L(a).removeChild(a)}function Aa(a,b){if(!b)return a.innerHTML;a.innerHTML=b}
function Ba(a,b){for(var c=[],d=n;d;)a[b]&&c[c.length-1]!==a[b]&&c.push(a[b]),a._superclass&&a._superclass.prototype?a=a._superclass.prototype:d=k;return c}function Fa(a,b,c){return M.klass({extend:a,init:b,prop:c})}function N(a,b){return Fa(M.Base,a,b)}function Ha(a){var b=j(a.type);b.controls=a.controls?n:k;b.preload=a.preload||"auto";b.autoplay=a.autoplay?n:k;b.loop=a.loop?n:k;b.src=a.dir+a.name+"."+a.suffix[0][0];return b}
function Ia(a,b){if(!t["HTML"+a+"Element"])return k;a=a.toLowerCase();for(var c=j(a),d=[],e=0,g=b.length;e<g;e++)c.canPlayType(a+"/"+b[e][1])&&d.push(b[e]);return!d.length?k:d}var t=window,B=document,n=!0,k=!1,K=null,l="",m=void 0,O=la(),P,Ja="orientationchange",Q=1.70158,M=C={};Date.now||(Date.now=function(){return 1*new Date});
M.util={win:t,doc:B,pageTop:v,override:da,replaceAll:fa,template:function(a,b){for(var c in b)a=fa(a,"<%= "+c+" %>",b[c]);return a},windowOpen:function(a,b,c){var d,e=[];for(d in c)ja(c[d])&&(c[d]===n?c[d]="yes":c[d]===k&&(c[d]="no")),e.push(d+"="+c[d]);return t.open(a,b,e.join(","))},typeCast:ea,makeQueryString:ga,parseQueryString:function(a){a=a.replace(/^[\#\?]/,l);a=a.split("&");for(var b=a.length,c,d={};b--;)c=a[b].split("="),d[c[0]]=ea(decodeURIComponent(c[1]));return d},is:w,isObject:ha,isNumber:x,
isString:ia,isFunction:y,isBoolean:ja,isArray:ka,isTouchDevice:la,nullFunction:z,eventPrevent:ma,eventStop:function(a){a.stopPropagation();return k},checkUserAgent:A,bind:na,owner:oa};
M.dom={$:ba,$$:function(a){return pa(a,B)},$child:function(a,b){return b.querySelector(a)},$$child:pa,$id:function(a){return B.getElementById(a)},on:H,off:I,create:j,show:ta,hide:ua,opacity:va,hasClass:D,addClass:E,removeClass:F,toggleClass:qa,css:J,computedStyle:wa,append:r,parent:L,before:xa,after:ya,remove:za,attr:ra,removeAttr:sa,html:Aa};
M.klass=function(a){function b(){for(var a=Ba(this,"__init__"),b=a.length;b--;)a[b].apply(this,arguments)}var c=a.init||function(){},d=a.prop;(a=a.extend)&&M.extend(b,a);b.prototype.__init__=c;da(b.prototype,d);return b};M.klass.ancestors=Ba;M.extend=function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;var d=a.prototype;d._superclass=b;d._super=function(){var a=this.Da,a=a?a.prototype.Wa:this.Da=b;a.apply(this,arguments)}};
M.Base=Fa(m,function(){this.n={}},{F:0,dispose:function(){for(var a=Ba(this,"disposeInternal"),b=0,c=a.length;b<c;b++)a[b].call(this);for(b in this.n)I.apply(K,this.n[b]);for(b in this)this[b]&&y(this[b].dispose)&&this[b].dispose();this.__proto__=K;for(b in this)delete this[b];return K},contract:function(a,b,c){H(a,b,c);this.F++;this.n[this.F]=[a,b,c];return this.F},uncontract:function(a){var b=this.n[a];delete this.n[a];I(b[0],b[1],b[2])}});
P=N(m,{SWITCHCLICK:O?"touchstart":"click",SWITCHDOWN:O?"touchstart":"mousedown",SWITCHMOVE:O?"touchmove":"mousemove",SWITCHUP:O?"touchend":"mouseup",SWITCHOVER:O?"touchstart":"mouseover",SWITCHOUT:O?"touchend":"mouseout",LOAD:"load",CHANGE:"change",CLICK:"click",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",RESIZE:"resize"});M.Event=P;P=M.e=new P;
M.ease={linear:function(a,b,c,d){return c*a/d+b},inCubic:function(a,b,c,d){return c*Math.pow(a/d,3)+b},outCubic:function(a,b,c,d){return c*(Math.pow(a/d-1,3)+1)+b},inOutCubic:function(a,b,c,d){return 1>(a/=d/2)?c/2*Math.pow(a,3)+b:c/2*(Math.pow(a-2,3)+2)+b},inQuart:function(a,b,c,d){return c*Math.pow(a/d,4)+b},outQuart:function(a,b,c,d){return-c*(Math.pow(a/d-1,4)-1)+b},inOutQuart:function(a,b,c,d){return 1>(a/=d/2)?c/2*Math.pow(a,4)+b:-c/2*(Math.pow(a-2,4)-2)+b},inQuint:function(a,b,c,d){return c*
Math.pow(a/d,5)+b},outQuint:function(a,b,c,d){return c*(Math.pow(a/d-1,5)+1)+b},inOutQuint:function(a,b,c,d){return 1>(a/=d/2)?c/2*Math.pow(a,5)+b:c/2*(Math.pow(a-2,5)+2)+b},inSine:function(a,b,c,d){return c*(1-Math.cos(a/d*(Math.PI/2)))+b},outSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},inOutSine:function(a,b,c,d){return c/2*(1-Math.cos(Math.PI*a/d))+b},inExpo:function(a,b,c,d){return c*Math.pow(2,10*(a/d-1))+b},outExpo:function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b},inOutExpo:function(a,
b,c,d){return 1>(a/=d/2)?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},inCirc:function(a,b,c,d){return c*(1-Math.sqrt(1-(a/=d)*a))+b},outCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},inOutCirc:function(a,b,c,d){return 1>(a/=d/2)?c/2*(1-Math.sqrt(1-a*a))+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},inQuad:function(a,b,c,d){return c*(a/=d)*a+b},outQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},inOutQuad:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},inBack:function(a,
b,c,d){return c*(a/=d)*a*((Q+1)*a-Q)+b},outBack:function(a,b,c,d){return c*((a=a/d-1)*a*((Q+1)*a+Q)+1)+b},inOutBack:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*(((Q*=1.525)+1)*a-Q)+b:c/2*((a-=2)*a*(((Q*=1.525)+1)*a+Q)+2)+b}};
M.cssease={linear:"linear",inCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",outCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",inOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",inQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",outQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",inOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",inQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",outQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",inOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",inSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",
outSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",inOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",inExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",outExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",inOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",inCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",outCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",inOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",inQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",outQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",
inOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",inBack:["cubic-bezier(0.600, 0, 0.735, 0.045)","cubic-bezier(0.600, -0.280, 0.735, 0.045)"],outBack:["cubic-bezier(0.175, 0.885, 0.320, 1)","cubic-bezier(0.175, 0.885, 0.320, 1.275)"],inOutBack:["cubic-bezier(0.680, 0, 0.265, 1)","cubic-bezier(0.680, -0.550, 0.265, 1.550)"]};var R=aa(["animation","webkitAnimation"],"Animation"),Ka=R.ra,La=R.prefix,Ma=R.da,Na=R.ga,S=R.sheet,T;
T=M.Animation=N(function(a,b,c){c=c||{};this.C=c.onComplete||z;this.a=a;T.id++;this.b="ciranim"+T.id;a=c.duration||T.duration;var d=c.ease||"cubic-bezier(0.190, 1.000, 0.220, 1.000)",e,g={};for(e in b)g[e]=b[e],x(g[e])&&(g[e]+="px");this.g=g;g=fa(fa(ca(g),'"',l),",",";");S.insertRule("@"+Ma+"keyframes "+this.b+"{to"+g+"}",S.cssRules.length);ka(d)||(d=[d]);b=this.b;e=0;for(var g=d.length,h=l;e<g;e++)h+=Ma+"animation:"+b+" "+a+"ms "+d[e]+" 0s 1 normal both;";S.insertRule("."+b+"{"+h+"}",S.cssRules.length);
c.manual||this.start()},{X:function(){I(this.a,Na+"End",this.end);I(this.a,"animationend",this.end)},disposeInternal:function(){this.stop()},start:function(){function a(a){var d=S.cssRules,e=d.length,g;b.X();if("webkit"===La){for(;e--;)g=d[e].name||(l+d[e].selectorText).split(".")[1],g===b.b&&S.deleteRule(e);F(b.a,b.b);J(b.a,b.g)}b.C(a)}var b=this;b.end=a;H(b.a,Na+"End",a);H(b.a,"animationend",a);E(b.a,b.b)},stop:function(){var a={};a[Ma+"animation-play-state"]="paused";J(this.a,a);this.X()}});
T.id=0;T.duration=500;T.support=Ka;var Oa=aa(["transitionProperty","webkitTransitionProperty"],"Transition"),Pa=Oa.ra,Qa=Oa.da,Ra=Oa.ga,Sa=Oa.sheet,U;
U=M.Transition=N(function(a,b,c){c=c||{};c.onComplete=c.onComplete||z;U.id++;this.b="cirtrans"+U.id;var d=[];da({},b);var e,g=c.duration||U.duration,h=c.ease||"cubic-bezier(0.190, 1.000, 0.220, 1.000)";ka(h)||(h=[h]);for(e in b)d.push(e);e=0;for(var p=h.length,q=l,q=q+(Qa+"transition-property:"+d.join(" ")+";"+Qa+"transition-duration:"+g+"ms;");e<p;e++)q+=Qa+"transition-timing-function:"+h[e]+";";Sa.insertRule("."+this.b+"{"+q+"}",Sa.cssRules.length);this.a=a;this.g=b;this.Sa=c;c.manual||this.start()},
{disposeInternal:function(){this.stop()},start:function(){var a=this;a.s=function(b){a.stop();setTimeout(function(){a.Sa.onComplete(b)},1)};H(a.a,Ra+"End",a.s);H(a.a,"transitionend",a.s);E(a.a,a.b);J(a.a,a.g)},stop:function(){var a=Sa.cssRules,b=a.length,c;I(this.a,Ra+"End",this.s);I(this.a,"transitionend",this.s);for(F(this.a,this.b);b--;)if(c=a[b].name||(l+a[b].selectorText).split(".")[1],c===this.b){Sa.deleteRule(b);break}}});U.id=0;U.support=Pa;U.duration=500;
var V=M.Tweener=N(function(a,b,c){var d;c=c||{};this.t=a;this.g=[];for(d in b)a=b[d],a.name=d,a.Ka=a.to-a.from,a.prefix=a.prefix||l,a.suffix=a.suffix||"px",this.g.push(a);this.V=c.duration||V.duration;this.La=c.ease||this.va;this.C=c.onComplete;c.manual||this.start()},{disposeInternal:function(){this.stop()},va:function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b},Z:t.requestAnimationFrame?function(a){requestAnimationFrame(a)}:t.webkitRequestAnimationFrame?function(a){webkitRequestAnimationFrame(a)}:
t.mozRequestAnimationFrame?function(a){mozRequestAnimationFrame(a)}:t.oRequestAnimationFrame?function(a){oRequestAnimationFrame(a)}:t.msRequestAnimationFrame?function(a){msRequestAnimationFrame(a)}:function(a){setTimeout(a,1E3/V.Xa)},loop:function(){for(var a=this,b=V.D,c,d=u(),e,g=b.length,h;g--;)if(c=b[g],i=c.g.length,e=d-c.Ha,e<c.V)for(;i--;)h=c.g[i],V.aa(c.t,h,c.La(e,h.from,h.Ka,c.V));else{for(;i--;)h=c.g[i],V.aa(c.t,h,h.to);c.C&&c.C();b.splice(g,1)}if(b.length)return a.Z(function(){a.loop()}),
n;this.stop()},start:function(){var a=this;a.Ha=u();V.D.push(a);V.P||(V.P=1,a.Z(function(){a.loop()}))},stop:function(){V.D=[];clearInterval(V.P);V.P=K}});V.aa=function(a,b,c){a[b.name]=b.prefix+c+b.suffix};V.D=[];V.fps=30;V.duration=500;M.$=function(a,b){var c,d,e;b=b||B;ia(a)?c=b.querySelectorAll(a):(c=[a],a=l);e=c.length;d=function(){};d.prototype=M.$.ma;d=new d;d.length=e;for(d.Ca=b;e--;)d[e]=c[e];return d};function W(a,b,c){var d=a.length;for(c=Ta(c);d--;)c[0]=a[d],b.apply(a,c);return a}
function X(a,b,c){c=Ta(c);c[0]=a[0];return b.apply(K,c)}function Ta(a){var b=[K];b.push.apply(b,a);return b}
M.$.ma={wa:W,Va:X,Ua:Ta,querySelectorAll:function(a){return this[0].querySelectorAll(a)},find:function(a){return M.$(a,this.Ca)},parent:function(){return M.$(L(this[0]))},on:function(){return W(this,H,arguments)},off:function(){return W(this,I,arguments)},show:function(){return W(this,ta)},hide:function(){return W(this,ua)},opacity:function(){return W(this,va,arguments)},hasClass:function(){return X(this,D,arguments)},addClass:function(){return W(this,E,arguments)},removeClass:function(){return W(this,
F,arguments)},toggleClass:function(){return W(this,qa,arguments)},css:function(){return W(this,J,arguments)},html:function(){return X(this,Aa,arguments)},attr:function(){return X(this,ra,arguments)},removeAttr:function(){return W(this,sa,arguments)},append:function(){return W(this,r,arguments)},before:function(){return X(this,xa,arguments)},after:function(){return X(this,ya,arguments)},remove:function(){return W(this,za,arguments)}};
function Ua(a,b,c,d,e){y(c)&&(e=c,c=K);y(d)&&!e&&(e=d,d=K);d&&(d=Va[d]);c={duration:c,ease:d,onComplete:e};if(Wa)b=new Xa(a,b,c);else{d=M.Tweener;e=a.style;var g;a=wa(a);var h,p,q={};for(g in b)h=Ya(b[g]),p=a.getPropertyValue(g),p=!p||"none"===p?0:1*Ya(p)[2],q[g]={from:p,to:1*h[2]||0,prefix:h[1],suffix:h[3]};b=new d(e,q,c)}this.k.push(b)}function Ya(a){a=a||l;a=l+a;return a.match(/^(.*?)([0-9\.]+)(.*)$/)}var Za=M.$.ma,Xa=M.Animation||{},Wa=Xa.support,Va={};Wa&&M.cssease?Va=M.cssease:M.ease&&(Va=M.ease);
Za.animate=function(){this.k||(this.k=[]);return Za.wa(this,Ua,arguments)};Za.stop=function(){if(this.k){for(var a=this.k.length;a--;)this.k[a].stop();this.k=K}return this};
M.HashQuery=N(m,{typeCast:function(a){var b=ea(a);return a===b&&(a=a.match("^[\"'](.*)[\"']$"))?a[1]:b},makeHash:function(a){var b="#"+a.mode;a=a.vars;var c="?",d;for(d in a)b+=c+d+"="+ca(a[d]),c="&";return encodeURI(b)},setHash:function(a){location.hash=this.makeHash(a)},parseHash:function(a){var b,c,d,e;b=decodeURIComponent(a).split("#")[1];if(!b)return k;b=b.split("?");a=b[0];if(b[1]){c={};b=b[1].split("&");for(e=b.length;e--;)b[e]&&(d=b[e].split("="),c[d[0]]=this.typeCast(d[1]))}return{mode:a,
vars:c}},getHash:function(){return this.parseHash(location.hash)}});
var $a=N(function(a){var b=this,c=a.autoplay,d=a.loop,e,g=a.element||B.body;a.preload="auto";a.autoplay=a.loop=k;switch(a.type){case "Audio":e=M.Audio(a);break;case "Video":e=M.Video(a)}b.f=e;if(!e)return k;if(c){var h;h=this.contract(e,"canplay",function(){b.uncontract(h);b.play()})}d&&this.loop(n);a.oncanplay&&this.contract(e,"canplay",a.oncanplay);a.onended&&this.contract(e,"ended",a.onended);r(g,e)},{disposeInternal:function(){za(this.f)},getElement:f("f"),getCurrent:function(){return this.f.currentTime},
getDuration:function(){return this.f.duration},setCurrent:function(a){this.f.currentTime=a},loop:function(a){var b=this;b.d&&(b.uncontract(b.d),delete b.d);a&&(b.d=b.contract(b.f,"ended",function(){b.stop();b.play()}))},play:function(){this.f.play()},pause:function(){this.f.pause()},stop:function(){this.setCurrent(0);this.pause()}});M.Audio=function(a){a.type="audio";a.suffix=M.Audio.support;return Ha(a)};M.Audio.support=Ia("Audio",[["mp3","mpeg"],["wav","wav"],["ogg","ogg"],["m4a","mp4"]]);
M.Sound=function(a){a.type="Audio";return new $a(a)};M.Sound.support=M.Audio.support;M.Video=function(a){a.type="video";a.suffix=M.Video.support;return Ha(a)};M.Video.support=Ia("Video",[["webm","webm"],["mp4","mp4"],["ogv","ogg"]]);M.Movie=function(a){a.type="Video";return new $a(a)};M.Movie.support=M.Video.support;
M.Ajax=N(function(a){a&&this.request(a)},{request:function(a){if("json"===a.dataType)return delete a.dataType,this.Ya(a);var b=a.url,c=a.callback||z,d=a.error||z,e=a.type||"GET",g=l,h;h=this.ta=new XMLHttpRequest;a.cash||(a.query||(a.query={}),a.query["cir"+u()]="0");a.query&&(g=a.query,ha(g)&&(g=ga(g),g=encodeURI(g)));h.onreadystatechange=function(){return 4!=h.readyState?k:200==h.status?c(h.responseText,h):d(h)};"GET"===e&&(b=-1!==b.indexOf("?")?b+"&":b+"?",b+=g,g=l);h.open(e,b);"POST"===e&&h.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded");h.send(g)},abort:function(){this.ta&&this.ta.abort()},json:function(a){var b=a.callback,c=a.error;a.callback=function(a){b(s(a))};a.error=function(a){c&&c(a)};this.request(a)}});M.Handle=N(function(a){this.H=a;this.attach()},{disposeInternal:function(){this.detach()},attach:function(){this.h(H)},detach:function(){this.h(I)},h:function(a){for(var b in this.H.events)a(this.H.element,b,this.H.events[b])}});
M.Brush=N(function(a){this.m=a.canvas;this.ea=this.m.getContext("2d");this.setSize(a)},{setSize:function(a){a.width&&(this.m.width=a.width);a.height&&(this.m.height=a.height)},pigment:function(a){var b=j("canvas"),c=j("img");c.onload=function(){b.width=a.width;b.height=a.height;b.getContext("2d").drawImage(c,0,0);a.onload(b,c)};c.src=a.src;return{image:b,x:a.x||0,y:a.y||0}},pigments:function(a,b){function c(a){var c=a.onload||z;a.onload=function(a,d){c(a,d);g--;0===g&&b(h)};h[e]=d.pigment(a);g++}
var d=this,e,g=0,h={};b=b||z;for(e in a)c(a[e]);return h},draw:function(a){var b=0,c=a.length,d;for(this.ea.clearRect(0,0,this.m.width,this.m.height);b<c;b++)d=a[b],this.ea.drawImage(d.image,d.x,d.y)}});M.Brush.support=!!t.HTMLCanvasElement;M.Datetime=function(a){if(!a||x(a))return Date(a);a=a.split(/[T:\-\+\/\s]/);3===a.length&&(a[3]=0,a[4]=0,a[5]=0);return new Date(1*a[0],1*a[1]-1,1*a[2],1*a[3],1*a[4],1*a[5])};
M.DataStore=N(function(){this.data={}},{set:function(a,b){this.data[a]=b},get:function(a){var b={},c;if(a)return this.data[a];for(c in this.data)b[c]=this.data[c];return b},remove:function(a){if(!this.data[a])return k;delete this.data[a]},reset:function(){this.data={}}});
var ab=N(function(a){this.l=a.namespace?a.namespace+"-":l;this.c=t[a.type.toLowerCase()+"Storage"]},{set:function(a,b){this.c.setItem(this.l+a,ca(b));return n},get:function(a){var b={},c;if(a)return s(this.c.getItem(this.l+a));for(c in this.c)this.l?(a=c.split(this.l)[1])&&(b[a]=s(this.c[c])):b[c]=s(this.c[c]);return b},remove:function(a){a=this.l+a;if(!this.c.getItem(a))return k;this.c.removeItem(a);return n},reset:function(){if(!this.l)return this.c.clear(),n;for(var a in this.c)this.remove(a)}});
M.LocalStorage=function(a){a=a||{};a.type="Local";return new ab(a)};M.SessionStorage=function(a){a=a||{};a.type="Session";return new ab(a)};M.Deferred=N(function(){this.q=[]},{isResolve:function(){return!this.q},resolve:function(a){if(this.isResolve())return this;var b=this.q,c=b.length,d=0;this.q=K;for(this.data=a;d<c;++d)b[d](a);return this},done:function(a){this.q?this.q.push(a):a(this.data);return this}});
M.DragFlick=N(function(a){a&&this.attach(a)},{G:function(a){return a.changedTouches?a.changedTouches[0]:a},amount:function(a){var b=this,c,d,e=k;this.contract(a.element,P.SWITCHDOWN,function(a){var h=b.G(a);c=h.pageX;d=h.pageY;e=n;ma(a)});this.contract(t,P.SWITCHUP,function(g){e&&(g=b.G(g),a.callback({x:g.pageX-c,y:g.pageY-d}),e=k)})},direction:function(a){this.amount({element:a.element,callback:function(b){var c=a.boundary||0,d={change:k,top:k,right:k,bottom:k,left:k,amount:b};Math.abs(b.x)>c&&(0<
b.x?d.right=n:0>b.x&&(d.left=n),d.change=n);Math.abs(b.y)>c&&(0<b.y?d.bottom=n:0>b.y&&(d.top=n),d.change=n);a.callback(d)}})},attach:function(a){function b(a,b,d){c.contract(a,b,function(a){d(c.G(a))})}var c=this,d=a.element,e=a.start||z,g=a.move||z,h=a.end||z,p=k,q=0,G=0;a.direction&&c.direction({element:d,boundary:a.boundary,callback:a.direction});b(d,P.SWITCHDOWN,function(a){p=n;q=a.pageX;G=a.pageY;e({e:a,move:{x:q,y:G}})});b(B,P.SWITCHMOVE,function(a){p&&g({e:a,move:{x:a.pageX-q,y:a.pageY-G}})});
b(B,P.SWITCHUP,function(a){p&&(h({e:a,move:{x:a.pageX-q,y:a.pageY-G}}),p=k)})}});M.ExternalInterface=function(a){a=a||{};return a.android?new db(a):new eb(a)};
var db=Fa(M.HashQuery,function(a){a=a||{};this.Fa=a.android;this.ha=a.externalObj},{call:function(a){this.Fa[a.mode](this.makeHash(a))},addCallback:function(a,b){var c=this;c.ha[a]=function(a){a=c.parseHash(a);return b(a.vars)}},removeCallback:function(a){delete this.ha[a]}}),eb=Fa(M.HashQuery,function(){this.p={}},{disposeInternal:function(){for(var a in this.p)this.removeCallback(a)},call:function(a){this.setHash(a)},addCallback:function(a,b){var c=this;c.p[a]=function(){var d=c.getHash();if(d.mode===
a)return b(d.vars),n};H(t,"hashchange",c.p[a])},removeCallback:function(a){I(t,"hashchange",this.p[a]);delete this.p[a]}});M.Facebook=N(m,{shareURL:function(a){var b="https://www.facebook.com/dialog/feed?app_id="+a.app_id+"&redirect_uri="+a.redirect_uri;return b+=ga({link:a.link,picture:a.picture,name:a.name,caption:a.caption,description:a.description})}});
M.FPS=N(function(a){this.O=this.v=a.criterion||20;this.Ma=a.enterframe;this.na=this.W(this.v);this.L=this.J=this.d=0;a.manual||this.start()},{disposeInternal:function(){this.stop()},getCriterion:f("v"),getSurver:f("O"),getFrameTime:f("na"),enter:function(){this.Ma({criterion:this.v,surver:this.O})},start:function(){this.L=u();this.d=setInterval(this.ya,this.na,this)},ya:function(a){a.J=u();a.O=a.W(a.J-a.L);a.L=a.J;a.enter()},W:function(a){return Math.round(1E3/a)},stop:function(){clearInterval(this.d)}});
M.ImgLoad=N(function(a){this.pa=a.srcs;this.N=this.pa.length;this.ja=[];this.w=[];this.Aa=a.onload||z;this.Ba=a.onprogress||z;this.M=this.I=0;this.qa=k;a.manual||this.start()},{ua:function(){this.I++;this.M=this.I/this.N;this.Ba(this.M);if(this.I>=this.N){for(var a=this.w.length;a--;)this.uncontract(this.w[a]);this.w=[];this.Aa(this.ja)}},start:function(){function a(){b.ua()}if(this.qa)return k;this.qa=n;for(var b=this,c,d=b.N;d--;)c=j("img"),c.src=b.pa[d],b.w.push(b.contract(c,P.LOAD,a)),b.ja.push(c)},
getProgress:f("M")});M.WindowLoad=N(function(a){if(a)this.onload(a.onload)},{onload:function(a){var b=this,c;c=this.contract(t,P.LOAD,function(){b.uncontract(c);a()})}});
M.Mobile=N(function(){},{getZoom:function(){return B.body.clientWidth/t.innerWidth},isAndroid:function(a){return A(/Android/i,a)},isIOS:function(a){return A(/iPhone|iPad|iPod/i,a)},isWindows:function(a){return A(/IEMobile/i,a)},isFBAPP:function(a){return A(/FBAN/,a)},isMobile:function(){return this.isAndroid()||this.isIOS()||this.isWindows()||this.isFBAPP()},killScroll:function(a){if(this.A)return k;a||v();this.A=this.contract(B,P.TOUCHMOVE,ma)},revivalScroll:function(a){if(!this.A)return k;a||v();
this.uncontract(this.A);delete this.A},hideAddress:function(){function a(){0===t.pageYOffset&&v()}function b(){setTimeout(a,100)}this.contract(t,P.LOAD,b,k);this.contract(t,Ja,b,k)},getOrientation:function(){return 90!==Math.abs(t.orientation)&&t.innerWidth<t.innerHeight?{portrait:n,landscape:k}:{portrait:k,landscape:n}},attachOrientation:function(a){function b(a){h.push(g.contract(t,P.LOAD,a));h.push(g.contract(t,Ja,a));h.push(g.contract(t,P.RESIZE,a))}function c(){for(var a=h.length;a--;)g.uncontract(h[a]);
h=[]}function d(){e();c()}function e(){if(g.getOrientation().portrait)return a.portrait(),n;a.landscape()}var g=this,h=[];a.immediately&&e();if(a.one)return b(d),function(){c()};b(e);return function(){c()}}});M.mobile=new M.Mobile;M.S=N(function(a){this.h=a.e;a.callback&&this.attach(a.callback)},{attach:function(a){this.detach();this.T=this.contract(t,this.h,a)},detach:function(){this.T&&this.uncontract(this.T)}});M.DeviceOrientation=function(a){a=a||{};a.e="deviceorientation";return M.S(a)};
M.DeviceOrientation.support="ondeviceorientation"in t;M.DeviceMotion=function(a){a=a||{};a.e="devicemotion";return M.S(a)};M.DeviceMotion.support="ondevicemotion"in t;var fb,gb;M.DeviceOrientation.support?(fb=M.DeviceOrientation,gb=function(a){return a}):M.DeviceMotion.support&&(fb=M.DeviceMotion,gb=function(a){return a.rotationRate});
M.DeviceShake=N(function(a){this.ba=new fb;this.xa=a.limit;this.Ea=a.waittime;a.callback&&a.direction&&this.attach(a.direction,a.callback)},{Ia:{x:"gamma",y:"beta",z:"alpha"},attach:function(a,b){a=this.Ia[a];var c=this,d;c.ba.attach(function(e){e=gb(e);d||(d=e);Math.abs(e[a]-d[a])>c.xa&&(d=K,b(e),setTimeout(function(){},c.Ea))})},detach:function(){this.ba.detach()}});M.DeviceShake.support=fb?n:k;
M.FontImg=N(function(a){a=a||{};this.type=a.type?a.type+"_":l;this.sa=a.tag||"span"},{make:function(a){a=(l+a).split(l);for(var b=l,c=a.length;c--;)b="<"+this.sa+' class="font_'+this.type+a[c]+'">&nbsp;</'+this.sa+">"+b;return b}});
M.Observer=N(function(){this.K={}},{on:function(a,b){var c=this.K;c[a]||(c[a]=[]);c[a].push(b)},one:function(a,b){function c(e){b(e);d.off(a,c)}var d=this;d.on(a,c)},off:function(a,b){var c=this.K;if(!b)return delete c[a],n;var d=c[a],e;if(!d)return k;for(e=d.length;e--;)if(b===d[e])return d.splice(e,1),0===d.length&&delete c[a],n;return k},fire:function(a,b){var c=this.K[a],d,e;if(!c)return k;for(e=c.length;e--;)(d=c[e])&&d(b);return n}});
M.PreRender=N(function(a){a=a||{};a.loopblur||(a.loopblur=20);this.j=a.elements||[];this.ia=a.guesslimit||30;this.Ra=a.onrendered||z;this.la=a.looptime||100;this.Qa=this.la+a.loopblur;a.manual||this.start()},{disposeInternal:function(){clearInterval(this.d)},start:function(){var a,b=this,c=u();for(a=b.j.length;a--;)ta(b.j[a]);b.d=setInterval(function(){var a=u(),e=a-c;c=a;if(e<b.Qa&&(b.ia--,1>b.ia)){clearInterval(b.d);for(a=b.j.length;a--;)ua(b.j[a]);b.Ra()}},this.la,this)}});
M.Route=N(function(a){this.t=a.target||l;this.za=a.noregex;this.r=a.action;a.manual||this.start()},{start:function(){this.fire(this.t)},fire:function(a){var b;if(this.za&&this.r[a])return this.r[a](a);for(b in this.r)if(a.match(b))this.r[b](b)}});
M.ScriptLoad=N(function(){this.j=[]},{requests:function(a,b){function c(c){var g=a[c].callback;a[c].callback=function(a){g(a);e--;0===e&&b(d.j)};d.request(a[c])}for(var d=this,e=0,g=a.length;e<g;e++)c(e)},request:function(a){var b=this,c=j("script"),d;c.src=a.src;r(B.body,c);b.j.push(c);a.callback&&(d=b.contract(c,P.LOAD,function(){b.uncontract(d);a.callback.apply(this,arguments)}))}});function Z(a){return hb?$.getResponseHeader(a):k}
function ib(a){var b=new XMLHttpRequest;b.onload=function(){a(b)};b.open("HEAD",location.href+"?update"+u()+"=1");b.send(K);return b}var $,hb=k;
M.ServerMeta=N(function(a){a=a||{};var b=a.callback||z;$?b($):$=ib(function(){hb=n;b($)})},{date:function(a){return ib(function(b){a(new Date(b.getResponseHeader("Date")))})},connection:function(){return Z("Connection")},contentLength:function(){return Z("Content-Length")},lastModified:function(){return Z("Last-Modified")},server:function(){return Z("Server")},contentType:function(){return Z("Content-Type")},acceptRanges:function(){return Z("Accept-Ranges")},keepAlive:function(){return Z("Keep-Alive")}});
M.Surrogate=N(function(a){this.Ja=a.delay;this.u=a.callback},{disposeInternal:function(){this.clear()},request:function(a){this.Ga=a;this.clear();this.R=setTimeout(this.flush,this.Ja,this)},flush:function(a){a=a||this;a.u(a.Ga)},clear:function(){clearInterval(this.R)}});
M.Throttle=N(function(a){this.Ta=a.waittime;this.u=a.callback},{disposeInternal:function(){this.unlock()},request:function(a){var b=this;if(b.ka)return b.Q=a,k;b.u(a);b.lock();b.R=setTimeout(function(){b.Q&&(b.u(b.Q),b.Q=K);b.unlock()},b.Ta,b)},lock:function(){this.ka=n},unlock:function(a){a=a||this;a.ka=k;clearInterval(a.R)}});
M.Timer=function(a){function b(){Y=u();var a=g-(Y-Da)/1E3;0>a&&(a=0);Ga=c(a);q(Ga);if(Y>Ea)return bb.stop(),G(),n;cb=setTimeout(b,p);return k}function c(a){var b;b=(l+a).split(".");a=b[0];b=b[1]?b[1]:l;a=d({oa:a,fa:Ca.Oa});b=d({oa:b,fa:Ca.Na,Pa:n});return a+"."+b}function d(a){var b=l+a.oa,c=a.fa,d=c-b.length;return!a.Pa?-1<d?e(d,0)+b:e(c,9):0<d?b+e(d,0):b.slice(0,c)}function e(a,b){var c=l;for(b=l+b;0<a;)c+=b,a--;return c}var g=a.limit,h=1E3*g,p=1E3*a.interval,q=a.onupdate,G=a.ontimeup,Ca;a=a.template.split(".");
Ca={Oa:a[0].length,Na:a[1].length};var Da=0,Y=0,Ea=h,Ga=c(g),cb,bb={getLimit:function(){return g},getTime:function(){return Ga},getProgress:function(){return 1-(Ea-Y)/h},setUpdate:function(a){q=a},setTimeup:function(a){G=a},countDown:function(){Y=Da=u();Ea=Da+h;b()},stop:function(){clearInterval(cb)}};return bb};
M.Twitter=N(m,{shareURL:function(a){var b=a.caption||l,c=a.name,d=a.hash,c=c?" \u300c"+c+"\u300d":l,d=d?" "+d:l;return a="https://twitter.com/intent/tweet?"+ga({url:a.redirect_uri,text:b+c+d})}});M.XML=N(function(a){this.a=j("div");this.U={};a&&this.setData(a.data)},{getData:f("U"),setData:function(a){this.U=a;Aa(this.a,a)},$:function(a){return this.a.querySelector(a)},$$:function(a){return pa(a,this.a)}});
M.Model=N(function(a){a=a||{};var b,c=a.defaults||this.defaults||{},d=a.events||this.events;this.ca=a.validate||this.validate;this.i=a.store||this.store||new C.DataStore;this.o=new C.Observer;for(b in c)this.set(b,c[b]);for(b in d)this.on(b,d[b])},{B:function(a,b,c){this.o.fire(a,this.i.get());b&&this.o.fire(a+":"+b,c)},set:function(a,b){if(this.ca[a]&&!this.ca[a](a,b))return this.B("fail",a,b);this.Y=this.i.get();this.i.set(a,b);this.B(P.CHANGE,a,b);return n},prev:function(a){return!a?this.Y:this.Y[a]},
get:function(a){return this.i.get(a)},remove:function(a){if(!a)return k;var b=this.i.get(a),c=this.i.remove(a);this.B("remove",a,b);return c},reset:function(){var a=this.i.reset();this.B("reset");return a},on:function(a,b){var c=na(this,b);this.o.on(a,c);return c},off:function(a,b){return this.o.off(a,b)},fire:function(a,b){return this.o.fire(a,b)}});
M.View=N(function(a){a=a?oa(this,a):oa(this,this,{});this.el=M.$(a.el||this.el||j("div"));this.attach();a.init&&this.init()},{disposeInternal:function(){this.detach()},h:function(a){var b,c,d,e=this.events;for(b in e)for(c in d="me"===b?this.el:this.el.find(b),e[b])d[a](c,this[e[b][c]])},attach:function(){this.h("on")},detach:function(){this.h("off")}});
M.Validate=N(function(a){a=a||{};this.level=a.level||"warn";oa(this,this,a)},{displayError:function(a,b){b="Validate Error: "+a+" is "+b+".";switch(this.level){case "log":return console.log(b),k;case "error":throw Error(b);case "off":return k;default:return console.warn(b),k}},isObject:function(a,b){if(ha(b))return n;this.displayError(a,"Object")},isNumber:function(a,b){if(x(b))return n;this.displayError(a,"Number")},isString:function(a,b){if(ia(b))return n;this.displayError(a,"String")},isFunction:function(a,
b){if(y(b))return n;this.displayError(a,"Function")},isBoolean:function(a,b){if(ja(b))return n;this.displayError(a,"Boolean")},isArray:function(a,b){if(ka(b))return n;this.displayError(a,"Array")}});M.validate=new M.Validate;
}());

/*! cir.js v0.8.1 | (c) 2013 Atsushi Mizoue. */(function(){
function g(a){return function(){return this[a]}}function h(){k.scrollTo(0,1)}function l(a,b){for(var c in b)a[c]=b[c];return a}function m(a){var b=""+a;return b.match("^{.*}$")?JSON.parse(b):b.match("^[0-9.]+$")?1*b:"true"===b?n:"false"===b?r:a}function aa(a,b,c){return a.split(b).join(c)}function s(a){var b="",c="",d;for(d in a)a[d]&&(c+=b+d+"="+encodeURIComponent(a[d]),b="&");return c}function t(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"?n:r}
function ba(a){return t("Object",a)}function ca(a){return t("Number",a)}function da(a){return t("String",a)}function ea(a){return t("Function",a)}function fa(a){return t("Array",a)}function ga(){return"ontouchstart"in k}function u(){return v}function ha(a){a.preventDefault();return r}function w(a,b){b=b?b:navigator.userAgent;return b.match(a)?n:r}function ia(a){return x.querySelector(a)}function ja(a,b){var c=b.querySelectorAll(a),d=[];d.push.apply(d,c);return d}
function y(a,b){for(var c=a.className,c=c?c.split(" "):[],d=0,e=c.length;d<e;d++)if(b&&b===c[d])return n;return r}function z(a,b){var c="";if(y(a,b))return r;a.className&&(c=" ");a.className=a.className+c+b;return n}function A(a,b){var c,d=[],e,f;if(!y(a,b))return r;c=a.className.split(" ");e=0;for(f=c.length;e<f;e++)b!==c[e]&&d.push(c[e]);a.className=d.join(" ");return n}function ka(a,b){return y(a,b)?A(a,b):z(a,b)}
function la(a,b,c){var d;if(ba(b)){for(d in b)a.setAttribute(d,b[d]);return n}return c||""===c?a.setAttribute(b,c):a.getAttribute(b)}function ma(a,b){a.removeAttribute(b)}function B(a,b){var c=x.createElement(a);b&&la(c,b);return c}function C(a,b,c){a.addEventListener(b,c,r)}function D(a,b,c){a.removeEventListener(b,c,r)}function na(a){a.style.display="block"}function oa(a){a.style.display="none"}function pa(a,b){a.style.opacity=b}
function E(a,b){var c=a.style,d,e,f;for(d in b)e=d,f=b[d],ca(f)&&(f+="px"),c[e]=f}function qa(a){return x.defaultView.getComputedStyle(a,v)}function F(a,b){return a.appendChild(b)}function ra(a){return a.parentNode.removeChild(a)}function sa(a,b){if(!b)return a.innerHTML;a.innerHTML=b}var k=window,x=document,n=!0,r=!1,v=null,H=ga(),I,J,ta="orientationchange",K=1.70158,L,M=k.C={};Date.now||(Date.now=function(){return+new Date});
M.utility={win:k,doc:x,pageTop:h,override:l,replaceAll:aa,windowOpen:function(a,b){return k.open(a,b)},typeCast:m,makeQueryString:s,parseQueryString:function(a){a=a.replace(/^\#/,"").replace(/^\?/,"");a=a.split("&");var b,c,d={};for(b=a.length;b--;)c=a[b].split("="),d[c[0]]=m(decodeURIComponent(c[1]));return d},is:t,isObject:ba,isNumber:ca,isString:da,isFunction:ea,isBoolean:function(a){return t("Boolean",a)},isArray:fa,isTouchDevice:ga,nullFunction:u,eventPrevent:ha,checkUserAgent:w};
M.element={$:ia,$$:function(a){return ja(a,x)},$child:function(a,b){return b.querySelector(a)},$$child:ja,$id:function(a){return x.getElementById(a)},on:C,off:D,create:B,show:na,hide:oa,opacity:pa,hasClass:y,addClass:z,removeClass:A,toggleClass:ka,css:E,computedStyle:qa,append:F,parent:function(a){return a.parentNode},remove:ra,attr:la,removeAttr:ma,html:sa};I=M.klass=function(a){var b=a.init||function(){},c=a.properties;(a=a.extend)&&M.extend(b,a);l(b.prototype,c);return b};
M.extend=function(a,b){function c(){this.init=a}c.prototype=b.prototype;a.prototype=new c;var d=a.prototype;d._superclass=b;d._super=function(){var a=this.ja,a=a?a.prototype.Ba:this.ja=b;a.apply(this,arguments)}};
J=I({init:function(a){a=a||{};if(a.single&&M.Event.a)return M.Event.a;a.single&&(M.Event.a=this)},properties:{switchclick:H?"touchstart":"click",switchdown:H?"touchstart":"mousedown",switchmove:H?"touchmove":"mousemove",switchup:H?"touchend":"mouseup",load:"load",change:"change",click:"click",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup",touchstart:"touchstart",touchmove:"touchmove",touchend:"touchend",resize:"resize"}});M.Event=J;J=M.event=new J;
L=M.Base=I({init:function(){this.i={}},properties:{w:0,dispose:function(){var a;if(this.i)for(a in this.i)D.apply(v,this.i[a]);for(a in this)delete this[a];return this.__proto__=v},contract:function(a,b,c){C(a,b,c);this.w++;this.i[this.w]=[a,b,c];return this.w},uncontract:function(a){var b=this.i[a];delete this.i[a];D(b[0],b[1],b[2])},d:function(){this.__proto__.__proto__.dispose.call(this)}}});
M.ease={linear:function(a,b,c,d){return c*a/d+b},inCubic:function(a,b,c,d){return c*Math.pow(a/d,3)+b},outCubic:function(a,b,c,d){return c*(Math.pow(a/d-1,3)+1)+b},inOutCubic:function(a,b,c,d){return 1>(a/=d/2)?c/2*Math.pow(a,3)+b:c/2*(Math.pow(a-2,3)+2)+b},inQuart:function(a,b,c,d){return c*Math.pow(a/d,4)+b},outQuart:function(a,b,c,d){return-c*(Math.pow(a/d-1,4)-1)+b},inOutQuart:function(a,b,c,d){return 1>(a/=d/2)?c/2*Math.pow(a,4)+b:-c/2*(Math.pow(a-2,4)-2)+b},inQuint:function(a,b,c,d){return c*
Math.pow(a/d,5)+b},outQuint:function(a,b,c,d){return c*(Math.pow(a/d-1,5)+1)+b},inOutQuint:function(a,b,c,d){return 1>(a/=d/2)?c/2*Math.pow(a,5)+b:c/2*(Math.pow(a-2,5)+2)+b},inSine:function(a,b,c,d){return c*(1-Math.cos(a/d*(Math.PI/2)))+b},outSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},inOutSine:function(a,b,c,d){return c/2*(1-Math.cos(Math.PI*a/d))+b},inExpo:function(a,b,c,d){return c*Math.pow(2,10*(a/d-1))+b},outExpo:function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b},inOutExpo:function(a,
b,c,d){return 1>(a/=d/2)?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},inCirc:function(a,b,c,d){return c*(1-Math.sqrt(1-(a/=d)*a))+b},outCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},inOutCirc:function(a,b,c,d){return 1>(a/=d/2)?c/2*(1-Math.sqrt(1-a*a))+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},inQuad:function(a,b,c,d){return c*(a/=d)*a+b},outQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},inOutQuad:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},inBack:function(a,
b,c,d){return c*(a/=d)*a*((K+1)*a-K)+b},outBack:function(a,b,c,d){return c*((a=a/d-1)*a*((K+1)*a+K)+1)+b},inOutBack:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*(((K*=1.525)+1)*a-K)+b:c/2*((a-=2)*a*(((K*=1.525)+1)*a+K)+2)+b}};
M.cssease={linear:"linear",inCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",outCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",inOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",inQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",outQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",inOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",inQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",outQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",inOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",inSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",
outSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",inOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",inExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",outExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",inOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",inCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",outCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",inOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",inQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",outQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",
inOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",inBack:["cubic-bezier(0.600, 0, 0.735, 0.045)","cubic-bezier(0.600, -0.280, 0.735, 0.045)"],outBack:["cubic-bezier(0.175, 0.885, 0.320, 1)","cubic-bezier(0.175, 0.885, 0.320, 1.275)"],inOutBack:["cubic-bezier(0.680, 0, 0.265, 1)","cubic-bezier(0.680, -0.550, 0.265, 1.550)"]};
for(var ua=["webkitAnimation","animation"],za=B("p"),Aa=r,N,P="",Ba="animation",Q=0,Ca=ua.length,Da,R,S;Q<Ca;Q++)if(void 0!==za.style[ua[Q]]){Aa=n;if(N=ua[Q].match(/^(.*?)animation$/i)[1])P="-"+N.toLowerCase()+"-",Ba=N+"Animation";Da=F(ia("head"),B("style",{type:"text/css"}));R=Da.sheet;break}
S=M.Animation=I({extend:L,init:function(a,b,c){if(!Aa)return r;c=c||{};this.u=c.onComplete||u;this.element=a;S.id++;this.id="ciranim"+S.id;a=c.duration||S.Duration;var d=c.ease||"ease",e,f={};for(e in b)f[e]=b[e],ca(f[e])&&(f[e]+="px");this.f=f;f=aa(aa(JSON.stringify(f),'"',""),",",";");R.insertRule("@"+P+"keyframes "+this.id+"{to"+f+"}",R.cssRules.length);fa(d)||(d=[d]);b=this.id;e=P;for(var f=0,j=d.length,p="";f<j;f++)p+=e+"animation:"+b+" "+a+"ms "+d[f]+" 0s 1 normal both;";R.insertRule("."+b+
"{"+p+"}",R.cssRules.length);c.manual||this.start()},properties:{O:function(){D(this.element,Ba+"End",this.end);D(this.element,"animationend",this.end)},dispose:function(){this.stop();this.d()},start:function(){function a(a){var d=R.cssRules,e=d.length,f;b.O();if("webkit"===N){for(;e--;)f=d[e].name||(""+d[e].selectorText).split(".")[1],f===b.id&&R.deleteRule(e);A(b.element,b.id);E(b.element,b.f)}b.u(a)}var b=this;b.end=a;C(b.element,Ba+"End",a);C(b.element,"animationend",a);z(b.element,b.id)},stop:function(){var a=
{};a[P+"animation-play-state"]="paused";E(this.element,a);this.O()}}});S.id=0;S.Duration=500;S.support=Aa;for(var Ea=["webkitTransitionProperty","transitionProperty"],Fa=B("p"),Ga=r,Ha,Ia="",Ja="transition",T=0,Ka=Ea.length,La,U,V;T<Ka;T++)if(void 0!==Fa.style[Ea[T]]){Ga=n;if(Ha=Ea[T].match(/^(.*?)transitionproperty$/i)[1])Ia="-"+Ha.toLowerCase()+"-",Ja=Ha.toLowerCase()+"Transition";La=F(ia("head"),B("style",{type:"text/css"}));U=La.sheet;break}
V=M.Transition=I({extend:L,init:function(a,b,c){if(!Ga)return r;c=c||{};c.onComplete=c.onComplete||u;V.id++;this.id="cirtrans"+V.id;var d=[];l({},b);var e,f=c.duration||V.Duration,j=c.ease||"ease";fa(j)||(j=[j]);for(e in b)d.push(e);e=Ia;for(var p=0,q=j.length,d=""+(e+"transition-property:"+d.join(" ")+";"+e+"transition-duration:"+f+"ms;");p<q;p++)d+=e+"transition-timing-function:"+j[p]+";";U.insertRule("."+this.id+"{"+d+"}",U.cssRules.length);this.element=a;this.f=b;this.wa=c;c.manual||this.start()},
properties:{dispose:function(){this.stop();this.d()},start:function(){var a=this;a.n=function(b){a.stop();setTimeout(function(){a.wa.onComplete(b)},1)};C(a.element,Ja+"End",a.n);C(a.element,"transitionend",a.n);z(a.element,a.id);E(a.element,a.f)},stop:function(){var a=U.cssRules,b=a.length,c;D(this.element,Ja+"End",this.n);D(this.element,"transitionend",this.n);for(A(this.element,this.id);b--;)if(c=a[b].name||(""+a[b].selectorText).split(".")[1],c===this.id){U.deleteRule(b);break}}}});V.id=0;
V.support=Ga;V.Duration=500;
var W=M.Tweener=I({extend:L,init:function(a,b,c){var d;c=c||{};this.target=a;this.f=[];for(d in b)a=b[d],a.name=d,a.distance=a.to-a.from,a.prefix=a.prefix||"",a.suffix=a.suffix||"px",this.f.push(a);this.duration=c.duration||W.Duration;this.oa=c.ease||this.fa;this.u=c.onComplete;c.manual||this.start()},properties:{dispose:function(){this.stop();this.d()},fa:function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b},P:k.requestAnimationFrame?function(a){requestAnimationFrame(a)}:k.webkitRequestAnimationFrame?
function(a){webkitRequestAnimationFrame(a)}:k.mozRequestAnimationFrame?function(a){mozRequestAnimationFrame(a)}:k.oRequestAnimationFrame?function(a){oRequestAnimationFrame(a)}:k.msRequestAnimationFrame?function(a){msRequestAnimationFrame(a)}:function(a){setTimeout(a,1E3/W.ya)},loop:function(){for(var a=this,b=W.Items,c,d=Date.now(),e,f=b.length,j,p,q;f--;)if(c=b[f],p=c.f.length,e=d-c.ma,e<c.duration)for(j=0;j<p;j++)q=c.f[j],W.Q(c.target,q,c.oa(e,q.from,q.distance,c.duration));else{for(j=0;j<p;j++)q=
c.f[j],W.Q(c.target,q,q.to);c.u&&c.u();b.splice(f,1)}if(b.length)return a.P(function(){a.loop()}),n;this.stop()},start:function(){var a=this;a.ma=Date.now();W.Items.push(a);W.I||(W.I=1,a.P(function(){a.loop()}))},stop:function(){W.Items=[];clearInterval(W.I);W.I=v}}});W.Q=function(a,b,c){a[b.name]=b.prefix+c+b.suffix};W.Items=[];W.FPS=30;W.Duration=500;
M.$=function(a,b){var c,d,e=0,f;b=b||x;da(a)?c=b.querySelectorAll(a):(c=[a],a="");f=c.length;d=function(){};d.prototype=M.$.Y;d=new d;d.length=f;for(d.ia=b;e<f;e++)d[e]=c[e];return d};function X(a,b,c){var d=0,e=a.length;for(c=Ma(c);d<e;d++)c[0]=a[d],b.apply(a,c);return a}function Y(a,b,c){c=Ma(c);c[0]=a[0];return b.apply(v,c)}function Ma(a){var b=[v];b.push.apply(b,a);return b}
M.$.Y={ga:X,Aa:Y,za:Ma,querySelectorAll:function(a){return this[0].querySelectorAll(a)},find:function(a){return M.$(a,this.ia)},parent:function(){return M.$(this[0].parentNode)},on:function(){return X(this,C,arguments)},off:function(){return X(this,D,arguments)},show:function(){return X(this,na)},hide:function(){return X(this,oa)},opacity:function(){return X(this,pa,arguments)},hasClass:function(){return Y(this,y,arguments)},addClass:function(){return X(this,z,arguments)},removeClass:function(){return X(this,
A,arguments)},toggleClass:function(){return X(this,ka,arguments)},css:function(){return X(this,E,arguments)},html:function(){return Y(this,sa,arguments)},attr:function(){return Y(this,la,arguments)},removeAttr:function(){return X(this,ma,arguments)},append:function(){return X(this,F,arguments)},remove:function(){return X(this,ra,arguments)}};
function Na(a,b,c,d,e){ea(c)&&(e=c,c=v);ea(d)&&!e&&(e=d,d=v);d&&(d=Oa[d]);c={duration:c,ease:d,onComplete:e};if(Pa)b=new Sa(a,b,c);else{d=M.Tweener;e=a.style;var f;a=qa(a);var j,p,q={};for(f in b)j=Ta(b[f]),p=a.getPropertyValue(f),p=!p||"none"===p?0:1*Ta(p)[2],q[f]={from:p,to:1*j[2]||0,prefix:j[1],suffix:j[3]};b=new d(e,q,c)}this.g.push(b)}function Ta(a){a=""+(a||"");return a.match(/^(.*?)([0-9\.]+)(.*)$/)}var Ua=M.$.Y,Sa=M.Animation||{},Pa=Sa.support,Oa={};
Pa&&M.cssease?Oa=M.cssease:M.ease&&(Oa=M.ease);Ua.animate=function(){this.g||(this.g=[]);return Ua.ga(this,Na,arguments)};Ua.stop=function(){if(this.g){for(var a=0,b=this.g.length;a<b;a++)this.g[a].stop();this.g=v}return this};
M.HashQuery=I({extend:L,properties:{typeCast:function(a){var b=m(a);return a===b&&(a=a.match("^[\"'](.*)[\"']$"))?a[1]:b},makeHash:function(a){var b="#"+a.mode;a=a.vars;var c="?",d;for(d in a)b+=c+d+"="+JSON.stringify(a[d]),c="&";return encodeURI(b)},setHash:function(a){location.hash=this.makeHash(a);return n},parseHash:function(a){var b,c,d,e;b=decodeURIComponent(a).split("#")[1];if(!b)return r;b=b.split("?");a=b[0];if(b[1]){c={};b=b[1].split("&");for(e=b.length;e--;)b[e]&&(d=b[e].split("="),c[d[0]]=
this.typeCast(d[1]))}return{mode:a,vars:c}},getHash:function(){return this.parseHash(location.hash)}}});M.Audio=function(a){if(!k.HTMLAudioElement)return r;for(var b=new Audio(""),c=a.suffix||[["mp3","mpeg"],["wav","wav"],["ogg","ogg"],["m4a","mp4"]],d=[],e=0,f=c.length;e<f;e++)b.canPlayType("audio/"+c[e][1])&&d.push([c[e][0]]);if(0===d.length)return r;b.controls=a.controls?n:r;b.preload=a.preload||"auto";b.autoplay=a.autoplay?n:r;b.loop=a.loop?n:r;b.src=a.dir+a.name+"."+d[0];return b};
M.Sound=I({extend:L,init:function(a){this._super();var b=this,c=a.autoplay,d=a.loop,e,f=a.element||x.body;a.preload="auto";a.autoplay=a.loop=r;e=new M.Audio(a);b.h=e;if(!e)return r;c&&this.contract(e,"canplay",function(){b.play()});d&&this.contract(e,"ended",function(){b.stop();b.play()});a.oncanplay&&this.contract(e,"canplay",a.oncanplay);a.onended&&this.contract(e,"ended",a.onended);f.appendChild(e)},properties:{getAudio:g("h"),getCurrent:function(){return this.h.currentTime},getDuration:function(){return this.h.duration},
setCurrent:function(a){this.h.currentTime=a},play:function(){this.h.play()},pause:function(){this.h.pause()},stop:function(){this.setCurrent(0);this.pause()}}});
M.Video=function(a){if(!k.HTMLVideoElement)return r;for(var b=B("video"),c=a.suffix||[["webm","webm"],["mp4","mp4"],["ogv","ogg"]],d=[],e=0,f=c.length;e<f;e++)b.canPlayType("video/"+c[e][1])&&d.push([c[e][0]]);if(0===d.length)return r;b.controls=a.controls?n:r;b.preload=a.preload||"auto";b.autoplay=a.autoplay?n:r;b.loop=a.loop?n:r;b.src=a.dir+a.name+"."+d[0];return b};
M.Movie=I({extend:L,init:function(a){this._super();var b=this,c=a.autoplay,d=a.loop,e,f=a.element||x.body;a.preload="auto";a.autoplay=a.loop=r;e=M.Video(a);b.j=e;if(!e)return r;c&&this.contract(e,"canplay",function(){b.play()});d&&this.contract(e,"ended",function(){b.stop();b.play()});a.oncanplay&&this.contract(e,"canplay",a.oncanplay);a.onended&&this.contract(e,"ended",a.onended);f.appendChild(e)},properties:{getVideo:g("j"),getCurrent:function(){return this.j.currentTime},getDuration:function(){return this.j.duration},
setCurrent:function(a){this.j.currentTime=a},play:function(){this.j.play()},pause:function(){this.j.pause()},stop:function(){this.setCurrent(0);this.pause()}}});
M.Ajax=I({extend:L,init:function(a){a&&this.request(a)},properties:{request:function(a){if("json"===a.dataType)return delete a.dataType,this.Ca(a);var b=a.url,c=a.callback||u,d=a.error||u,e=a.type||"GET",f="",j;a.cash||(a.query||(a.query={}),a.query["cirajaxcash"+Date.now()]="0");a.query&&(f=a.query,ba(f)&&(f=s(f),f=encodeURI(f)));j=this.L=new XMLHttpRequest;j.onreadystatechange=function(){return 4!=j.readyState?r:200==j.status?c(j.responseText,j):d(j)};"GET"===e&&(b=-1!==b.indexOf("?")?b+"&":b+"?",
b+=f,f="");j.open(e,b);"POST"===e&&j.setRequestHeader("Content-Type","application/x-www-form-urlencoded");j.send(f)},abort:function(){this.L&&this.L.abort()},json:function(a){var b=a.callback,c=a.error;a.callback=function(a){b(JSON.parse(a))};a.error=function(a){c&&c(a)};this.request(a)}}});
M.Bind=I({extend:L,init:function(a){this.r=a;this.add()},properties:{dispose:function(){this.remove();this.d()},getHandler:g("r"),add:function(){this.M(n)},remove:function(){this.M(r)},M:function(a){a=a?C:D;for(var b in this.r.events)a(this.r.element,b,this.r.events[b])}}});
M.Brush=I({extend:L,init:function(a){this.canvas=a.canvas;this.R=this.canvas.getContext("2d");this.setSize(a)},properties:{setSize:function(a){a.width&&(this.canvas.width=a.width);a.height&&(this.canvas.height=a.height)},pigment:function(a){var b=B("canvas"),c=B("img");c.onload=function(){b.width=a.width;b.height=a.height;b.getContext("2d").drawImage(c,0,0);a.onload(b,c)};c.src=a.src;return{image:b,x:a.x||0,y:a.y||0}},pigments:function(a,b){function c(a){var c=a.onload||u;a.onload=function(a,d){c(a,
d);f--;0===f&&b(j)};j[e]=d.pigment(a);f++}var d=this,e,f=0,j={};b=b||u;for(e in a)c(a[e]);return j},draw:function(a){var b=0,c=a.length,d;for(this.R.clearRect(0,0,this.canvas.width,this.canvas.height);b<c;b++)d=a[b],this.R.drawImage(d.image,d.x,d.y)}}});
M.DataStore=I({extend:L,init:function(a){a=a||{};if(a.single&&M.DataStore.a)return M.DataStore.a;this.data={};a.single&&(M.DataStore.a=this)},properties:{set:function(a,b){this.data[a]=b},get:function(a){var b={},c;if(a)return this.data[a];for(c in this.data)b[c]=this.data[c];return b},remove:function(a){if(!this.data[a])return r;delete this.data[a]},reset:function(){this.data={}}}});
M.Deferred=I({extend:L,init:function(){this.m=[]},properties:{isResolve:function(){return!this.m},resolve:function(a){if(this.isResolve())return this;var b=this.m,c=b.length,d=0;this.m=v;for(this.data=a;d<c;++d)b[d](a);return this},done:function(a){this.m?this.m.push(a):a(this.data);return this}}});
M.DragFlick=I({extend:L,init:function(a){this._super();a&&this.bind(a)},properties:{z:function(a){return a.changedTouches?a.changedTouches[0]:a},amount:function(a){var b=this,c,d,e=r;this.contract(a.element,J.switchdown,function(a){var j=b.z(a);c=j.pageX;d=j.pageY;e=n;ha(a)});this.contract(k,J.switchup,function(f){e&&(f=b.z(f),a.callback({x:f.pageX-c,y:f.pageY-d}),e=r)})},direction:function(a){this.amount({element:a.element,callback:function(b){var c=a.boundary||0,d={change:r,top:r,right:r,bottom:r,
left:r,amount:b};Math.abs(b.x)>c&&(0<b.x?d.right=n:0>b.x&&(d.left=n),d.change=n);Math.abs(b.y)>c&&(0<b.y?d.bottom=n:0>b.y&&(d.top=n),d.change=n);a.callback(d)}})},bind:function(a){function b(a,b,d){c.contract(a,b,function(a){d(c.z(a))})}var c=this,d=a.element,e=a.start||u,f=a.move||u,j=a.end||u,p=r,q=0,G=0;a.direction&&c.direction({element:d,boundary:a.boundary,callback:a.direction});b(d,J.switchdown,function(a){p=n;q=a.pageX;G=a.pageY;e({e:a,move:{x:q,y:G}})});b(x,J.switchmove,function(a){p&&f({e:a,
move:{x:a.pageX-q,y:a.pageY-G}})});b(x,J.switchup,function(a){p&&(j({e:a,move:{x:a.pageX-q,y:a.pageY-G}}),p=r)})}}});M.ExternalInterface=function(a){a=a||{};var b=M.ExternalInterface,c;if(a.single&&b.a)return b.a;c=a.android?new b.Android(a):new b.IOS(a);a.single&&(b.a=c);return c};
M.ExternalInterface.Android=I({extend:M.HashQuery,init:function(a){a=a||{};this.ka=a.android;this.T=a.externalObj},properties:{call:function(a){this.ka[a.mode](this.makeHash(a))},addCallback:function(a,b){var c=this;c.T[a]=function(a){a=c.parseHash(a);return b(a.vars)}},removeCallback:function(a){delete this.T[a]}}});
M.ExternalInterface.IOS=I({extend:M.HashQuery,init:function(){this.l={}},properties:{dispose:function(){for(var a in this.l)this.removeCallback(a);this.d()},call:function(a){this.setHash(a)},addCallback:function(a,b){var c=this;c.l[a]=function(){var d=c.getHash();return d.mode===a?(b(d.vars),n):r};C(k,"hashchange",c.l[a])},removeCallback:function(a){D(k,"hashchange",this.l[a]);delete this.l[a]}}});
M.Facebook=I({extend:L,properties:{v:"https://www.facebook.com/dialog/feed?",shareURL:function(a){var b=this.v+"app_id="+a.app_id+"&redirect_uri="+a.redirect_uri;return b+=s({link:a.link,picture:a.picture,name:a.name,caption:a.caption,description:a.description})}}});
M.FPS=I({extend:L,init:function(a){a=a||{};a.criterion||(a.criterion=20);if(a.single&&M.FPS.a)return M.FPS.a;this.H=this.p=a.criterion;this.pa=a.enterframe;this.Z=this.N(this.p);this.k=this.B=this.t=0;a.manual||this.start();a.single&&(M.FPS.a=this)},properties:{dispose:function(){this.stop();this.d()},getCriterion:g("p"),getSurver:g("H"),getFrameTime:g("Z"),enter:function(){this.pa({criterion:this.p,surver:this.H})},start:function(){this.k=Date.now();this.t=setInterval(this.ha,this.Z,this)},ha:function(a){a.B=
Date.now();a.H=a.N(a.B-a.k);a.k=a.B;a.enter()},N:function(a){return Math.round(1E3/a)},stop:function(){clearInterval(this.t)}}});
M.ImgLoad=I({extend:L,init:function(a){this._super();this.ba=a.srcs;this.G=this.ba.length;this.V=[];this.q=[];this.onload=a.onload||u;this.onprogress=a.onprogress||u;this.F=this.A=0;this.ca=r;a.manual||this.start()},properties:{ea:function(){this.A++;this.F=this.A/this.G;this.onprogress(this.F);if(this.A>=this.G){for(var a=this.q.length;a--;)this.uncontract(this.q[a]);this.q=[];this.onload(this.V)}},start:function(){function a(){b.ea()}if(this.ca)return r;this.ca=n;for(var b=this,c,d=0,e=b.G;d<e;d++)c=
B("img"),c.src=b.ba[d],b.q.push(b.contract(c,J.load,a)),b.V.push(c)},getProgress:g("F")}});M.WindowLoad=I({extend:L,init:function(a){this._super();if(a&&a.onload)this.onload(a.onload)},properties:{onload:function(a){var b=this,c;c=this.contract(k,J.load,function(){b.uncontract(c);a()})}}});
M.LocalStorage=I({extend:L,init:function(a){a=a||{};if(a.single&&M.LocalStorage.a)return M.LocalStorage.a;this.c=a.namespace?a.namespace+"-":"";a.single&&(M.LocalStorage.a=this)},properties:{b:k.localStorage,set:function(a,b){this.b.setItem(this.c+a,JSON.stringify(b));return n},get:function(a){var b={},c;if(a)return JSON.parse(this.b.getItem(this.c+a));for(c in this.b)this.c?(a=c.split(this.c)[1])&&(b[a]=JSON.parse(this.b[c])):b[c]=JSON.parse(this.b[c]);return b},remove:function(a){a=this.c+a;if(!this.b.getItem(a))return r;
this.b.removeItem(a);return n},reset:function(){if(!this.c)return this.b.clear(),n;for(var a in this.b)this.remove(a)}}});
M.Mobile=I({extend:L,init:function(){this._super()},properties:{getZoom:function(){return x.body.clientWidth/k.innerWidth},isAndroid:function(a){return w(/Android/i,a)},isIOS:function(a){return w(/iPhone|iPad|iPod/i,a)},isWindows:function(a){return w(/IEMobile/i,a)},isFBAPP:function(a){return w(/FBAN/,a)},isMobile:function(){return this.isAndroid()||this.isIOS()||this.isWindows()||this.isFBAPP()},killScroll:function(a){if(this.s)return r;a||h();this.s=this.contract(x,J.touchmove,ha)},revivalScroll:function(a){if(!this.s)return r;
a||h();this.uncontract(this.s);delete this.s},hideAddress:function(){function a(){0===k.pageYOffset&&h()}function b(){setTimeout(a,100)}this.contract(k,J.load,b,r);this.contract(k,ta,b,r)},getOrientation:function(){return 90!==Math.abs(k.orientation)&&k.innerWidth<k.innerHeight?{portrait:n,landscape:r}:{portrait:r,landscape:n}},bindOrientation:function(a){function b(a){j.push(f.contract(k,J.load,a));j.push(f.contract(k,ta,a));j.push(f.contract(k,J.resize,a))}function c(){for(var a=j.length;a--;)f.uncontract(j[a]);
j=[]}function d(){e();c()}function e(){if(f.getOrientation().portrait)return a.portrait(),n;a.landscape()}var f=this,j=[];a.immediately&&e();if(a.one)return b(d),function(){c()};b(e);return function(){c()}}}});M.FontImg=I({extend:L,init:function(a){a=a||{type:""};this.type=a.type?a.type+"_":"";this.da=a.tag||"span"},properties:{make:function(a){a=(""+a).split("");var b="",c;for(c=a.length;c--;)b="<"+this.da+' class="font_'+this.type+a[c]+'">&nbsp;</'+this.da+">"+b;return b}}});
M.Observer=I({extend:L,init:function(a){a=a||{};if(a.single&&M.Observer.a)return M.Observer.a;this.D={};a.single&&(M.Observer.a=this)},properties:{on:function(a,b){var c=this.D;c[a]||(c[a]=[]);c[a].push(b)},one:function(a,b){function c(e){b(e);d.off(a,c)}var d=this;d.on(a,c)},off:function(a,b){var c=this.D;if(!b)return delete c[a],n;var d=c[a],e;if(!d)return r;for(e=d.length;e--;)if(b===d[e])return d.splice(e,1),0===d.length&&delete c[a],n;return r},fire:function(a,b){var c=this.D[a],d,e;if(!c)return r;
for(e=c.length;e--;)(d=c[e])&&d(b);return n}}});
M.PreRender=I({extend:L,init:function(a){a=a||{};a.loopblur||(a.loopblur=20);this.elements=a.elements||[];this.U=a.guesslimit||30;this.va=a.onrendered||u;this.X=a.looptime||100;this.ta=this.X+a.loopblur;a.manual||this.start()},properties:{start:function(){var a;for(a=this.elements.length;a--;)na(this.elements[a]);this.k=Date.now();this.t=setInterval(function(a){var c=Date.now(),d=c-a.k;a.k=c;if(d<a.ta&&(a.U--,1>a.U)){clearInterval(a.t);for(c=a.elements.length;c--;)oa(a.elements[c]);a.va()}},this.X,
this)}}});M.Route=I({extend:L,init:function(a){if(a.single&&M.Route.a)return M.Route.a;this.target=a.target||"";this.ua=a.noregex;this.action=a.action;a.manual||this.start();a.single&&(M.Route.a=this)},properties:{start:function(){this.fire(this.target)},fire:function(a){var b;if(this.ua&&this.action[a])return this.action[a](a);for(b in this.action)if(a.match(b))this.action[b](b)}}});
M.ScriptLoad=I({extend:L,init:function(){this._super();this.elements=[]},properties:{requests:function(a,b){function c(c){var f=a[c].callback;a[c].callback=function(a){f(a);e--;0===e&&b(d.elements)};d.request(a[c])}for(var d=this,e=0,f=a.length;e<f;e++)c(e)},request:function(a){var b=this,c=B("script"),d;c.src=a.src;x.body.appendChild(c);b.elements.push(c);a.callback&&(d=b.contract(c,J.load,function(){b.uncontract(d);a.callback.apply(this,arguments)}))}}});
function Z(a){return Va?$.getResponseHeader(a):r}function Wa(a){var b=new XMLHttpRequest;b.onload=function(){a(b)};b.open("HEAD",location.href+"?update"+Date.now()+"=1");b.send(v);return b}var $,Va=r;
M.ServerMeta=I({extend:L,init:function(a){a=a||{};var b=a.callback||u;$?b($):$=Wa(function(){Va=n;b($)})},properties:{date:function(a){return Wa(function(b){b=new Date(b.getResponseHeader("Date"));a(b)})},connection:function(){return Z("Connection")},contentLength:function(){return Z("Content-Length")},lastModified:function(){return Z("Last-Modified")},server:function(){return Z("Server")},contentType:function(){return Z("Content-Type")},acceptRanges:function(){return Z("Accept-Ranges")},keepAlive:function(){return Z("Keep-Alive")}}});
M.SessionStorage=I({extend:L,init:function(a){a=a||{};if(a.single&&M.SessionStorage.a)return M.SessionStorage.a;this.c=a.namespace?a.namespace+"-":"";a.single&&(M.SessionStorage.a=this)},properties:{b:k.sessionStorage,set:function(a,b){this.b.setItem(this.c+a,JSON.stringify(b));return n},get:function(a){var b={},c;if(a)return JSON.parse(this.b.getItem(this.c+a));for(c in this.b)this.c?(a=c.split(this.c)[1])&&(b[a]=JSON.parse(this.b[c])):b[c]=JSON.parse(this.b[c]);return b},remove:function(a){a=this.c+
a;if(!this.b.getItem(a))return r;this.b.removeItem(a);return n},reset:function(){if(!this.c)return this.b.clear(),n;for(var a in this.b)this.remove(a)}}});M.Surrogate=I({extend:L,init:function(a){this.na=a.delay;this.o=a.callback},properties:{dispose:function(){this.clear();this.d()},request:function(a){this.la=a;this.clear();this.K=setTimeout(this.flush,this.na,this)},flush:function(a){a=a||this;a.o(a.la)},clear:function(){clearInterval(this.K)}}});
M.Throttle=I({extend:L,init:function(a){this.xa=a.waittime;this.o=a.callback},properties:{dispose:function(){this.unlock();this.d()},request:function(a){var b=this;if(b.W)return b.J=a,r;b.o(a);b.lock();b.K=setTimeout(function(){b.J&&(b.o(b.J),b.J=v);b.unlock()},b.xa,b)},lock:function(){this.W=n},unlock:function(a){a=a||this;a.W=r;clearInterval(a.K)}}});
M.Timer=function(a){function b(){O=Date.now();var a=f-(O-wa)/1E3;0>a&&(a=0);ya=c(a);q(ya);if(O>xa)return Qa.stop(),G(),n;Ra=setTimeout(b,p);return r}function c(a){var b;b=(""+a).split(".");a=b[0];b=b[1]?b[1]:"";a=d({aa:a,S:va.ra});b=d({aa:b,S:va.qa,sa:n});return a+"."+b}function d(a){var b=""+a.aa,c=a.S,d=c-b.length;return!a.sa?-1<d?e(d,0)+b:e(c,9):0<d?b+e(d,0):b.slice(0,c)}function e(a,b){var c="";for(b=""+b;0<a;)c+=b,a--;return c}var f=a.limit,j=1E3*f,p=1E3*a.interval,q=a.onupdate,G=a.ontimeup,
va;a=a.template.split(".");va={ra:a[0].length,qa:a[1].length};var wa=0,O=0,xa=j,ya=c(f),Ra,Qa={getLimit:function(){return f},getTime:function(){return ya},getProgress:function(){return 1-(xa-O)/j},setUpdate:function(a){q=a},setTimeup:function(a){G=a},countDown:function(){O=wa=Date.now();xa=wa+j;b()},stop:function(){clearInterval(Ra)}};return Qa};
M.Twitter=I({extend:L,properties:{v:"https://twitter.com/intent/tweet?",shareURL:function(a){var b=a.caption||"",c=a.name,d=a.hash,e=this.v;return e+=s({url:a.redirect_uri,text:b+(c?" \u300c"+c+"\u300d":"")+(d?" "+d:"")})}}});M.XML=I({extend:L,init:function(a){this.element=B("div");this.data={};a&&a.data&&this.setData(a.data)},properties:{getData:g("data"),setData:function(a){this.data=this.element.innerHTML=a},$:function(a){return this.element.querySelector(a)},$$:function(a){return ja(a,this.element)}}});
}());

/*! cir.js v0.8.2 | (c) 2013 Atsushi Mizoue. */(function(){
function f(a){return function(){return this[a]}}function aa(a,b,c){return j.klass({extend:a,init:b,properties:c})}function k(a,b){return aa(j.Base,a,b)}function ba(a,b){for(var c=l("p"),d=m,e,g="",h=a.length,n,v=RegExp("^(.*?)"+a[0]+"$","i");h--;)if(c.style[a[h]]!==p){d=q;(e=a[h].match(v)[1])?(g=e.toLowerCase(),b=g+b,g="-"+g+"-"):b=b.toLowerCase();c=r(ca("head"),l("style",{type:"text/css"}));n=c.sheet;break}return{ea:b,pa:d,prefix:e,ba:g,sheet:n}}function s(a){return t.JSON.parse(a)}
function da(a){return t.JSON.stringify(a)}function u(){return Date.now()}function w(){t.scrollTo(0,1)}function ea(a,b){for(var c in b)a[c]=b[c];return a}function fa(a){var b=""+a;return b.match("^{.*}$")?s(b):b.match("^[0-9.]+$")?1*b:"true"===b?q:"false"===b?m:a}function ga(a,b,c){return a.split(b).join(c)}function x(a){var b="",c="",d;for(d in a)a[d]&&(c+=b+d+"="+encodeURIComponent(a[d]),b="&");return c}function y(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"?q:m}
function ha(a){return y("Object",a)}function ia(a){return y("Number",a)}function ja(a){return y("String",a)}function ka(a){return y("Function",a)}function la(a){return y("Boolean",a)}function ma(a){return y("Array",a)}function na(){return"ontouchstart"in t}function z(){return A}function oa(a){a.preventDefault();return m}function B(a,b){b=b?b:navigator.userAgent;return b.match(a)?q:m}function ca(a){return D.querySelector(a)}
function pa(a,b){var c=b.querySelectorAll(a),d=[];d.push.apply(d,c);return d}function E(a,b){for(var c=a.className,c=c?c.split(" "):[],d=c.length;d--;)if(b===c[d])return q;return m}function F(a,b){var c="",d=a.className;if(E(a,b))return m;d&&(c=" ");a.className=d+c+b;return q}function H(a,b){var c,d=[],e;if(!E(a,b))return m;c=a.className.split(" ");for(e=c.length;e--;)b!==c[e]&&d.push(c[e]);a.className=d.join(" ");return q}function qa(a,b){return E(a,b)?H(a,b):F(a,b)}
function ra(a,b,c){var d;if(ha(b)){for(d in b)a.setAttribute(d,b[d]);return q}return c||""===c?a.setAttribute(b,c):a.getAttribute(b)}function sa(a,b){a.removeAttribute(b)}function l(a,b){var c=D.createElement(a);b&&ra(c,b);return c}function I(a,b,c){a.addEventListener(b,c,m)}function J(a,b,c){a.removeEventListener(b,c,m)}function ta(a){a.style.display="block"}function ua(a){a.style.display="none"}function va(a,b){a.style.opacity=b}
function K(a,b){var c=a.style,d,e,g;for(d in b)e=d,g=b[d],ia(g)&&(g+="px"),c[e]=g}function wa(a){return D.defaultView.getComputedStyle(a,A)}function r(a,b){return a.appendChild(b)}function Aa(a){return a.parentNode}function Ca(a){return Aa(a).removeChild(a)}function Da(a,b){if(!b)return a.innerHTML;a.innerHTML=b}
function L(a){if(!t["HTML"+a.type+"Element"])return m;var b=a.type.toLowerCase(),c=l(b);a=a.suffix;for(var d=[],e=0,g=a.length;e<g;e++)c.canPlayType(b+"/"+a[e][1])&&d.push(a[e]);return!d.length?m:d}var t=window,D=document,q=!0,m=!1,A=null,p=void 0,M=na(),N,Ea="orientationchange",O=1.70158,j=C={};Date.now||(Date.now=function(){return+new Date});
j.utility={win:t,doc:D,pageTop:w,override:ea,replaceAll:ga,windowOpen:function(a,b,c){var d,e=[];for(d in c){if(la(c[d]))switch(c[d]){case q:c[d]="yes";break;case m:c[d]="no"}e.push(d+"="+c[d])}return t.open(a,b,e.join(","))},typeCast:fa,makeQueryString:x,parseQueryString:function(a){a=a.replace(/^\#/,"").replace(/^\?/,"");a=a.split("&");for(var b=a.length,c,d={};b--;)c=a[b].split("="),d[c[0]]=fa(decodeURIComponent(c[1]));return d},is:y,isObject:ha,isNumber:ia,isString:ja,isFunction:ka,isBoolean:la,
isArray:ma,isTouchDevice:na,nullFunction:z,eventPrevent:oa,checkUserAgent:B};j.dom={$:ca,$$:function(a){return pa(a,D)},$child:function(a,b){return b.querySelector(a)},$$child:pa,$id:function(a){return D.getElementById(a)},on:I,off:J,create:l,show:ta,hide:ua,opacity:va,hasClass:E,addClass:F,removeClass:H,toggleClass:qa,css:K,computedStyle:wa,append:r,parent:Aa,remove:Ca,attr:ra,removeAttr:sa,html:Da};
j.klass=function(a){var b=a.init||function(){},c=a.properties;(a=a.extend)&&j.extend(b,a);ea(b.prototype,c);return b};j.extend=function(a,b){function c(){this.init=a}c.prototype=b.prototype;a.prototype=new c;var d=a.prototype;d._superclass=b;d._super=function(){var a=this.Ba,a=a?a.prototype.Va:this.Ba=b;a.apply(this,arguments)}};
j.Base=j.klass({init:function(a){a=a||{};this.k={};this.Ca=a.single},properties:{G:0,m:function(a){if(this.Ca){if(j[a].o)return j[a].o;j[a].o=this}return this},dispose:function(){var a;if(this.k)for(a in this.k)J.apply(A,this.k[a]);for(a in this)delete this[a];return this.__proto__=A},contract:function(a,b,c){I(a,b,c);this.G++;this.k[this.G]=[a,b,c];return this.G},uncontract:function(a){var b=this.k[a];delete this.k[a];J(b[0],b[1],b[2])},b:function(){this.__proto__.__proto__.dispose.call(this)}}});
N=k(function(a){this._super(a);return this.m("Event")},{switchclick:M?"touchstart":"click",switchdown:M?"touchstart":"mousedown",switchmove:M?"touchmove":"mousemove",switchup:M?"touchend":"mouseup",switchover:M?"touchstart":"mouseover",switchout:M?"touchend":"mouseout",load:"load",change:"change",click:"click",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup",mouseover:"mouseover",mouseout:"mouseout",touchstart:"touchstart",touchmove:"touchmove",touchend:"touchend",resize:"resize"});
j.Event=N;N=j.event=new N;
j.ease={linear:function(a,b,c,d){return c*a/d+b},inCubic:function(a,b,c,d){return c*Math.pow(a/d,3)+b},outCubic:function(a,b,c,d){return c*(Math.pow(a/d-1,3)+1)+b},inOutCubic:function(a,b,c,d){return 1>(a/=d/2)?c/2*Math.pow(a,3)+b:c/2*(Math.pow(a-2,3)+2)+b},inQuart:function(a,b,c,d){return c*Math.pow(a/d,4)+b},outQuart:function(a,b,c,d){return-c*(Math.pow(a/d-1,4)-1)+b},inOutQuart:function(a,b,c,d){return 1>(a/=d/2)?c/2*Math.pow(a,4)+b:-c/2*(Math.pow(a-2,4)-2)+b},inQuint:function(a,b,c,d){return c*
Math.pow(a/d,5)+b},outQuint:function(a,b,c,d){return c*(Math.pow(a/d-1,5)+1)+b},inOutQuint:function(a,b,c,d){return 1>(a/=d/2)?c/2*Math.pow(a,5)+b:c/2*(Math.pow(a-2,5)+2)+b},inSine:function(a,b,c,d){return c*(1-Math.cos(a/d*(Math.PI/2)))+b},outSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},inOutSine:function(a,b,c,d){return c/2*(1-Math.cos(Math.PI*a/d))+b},inExpo:function(a,b,c,d){return c*Math.pow(2,10*(a/d-1))+b},outExpo:function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b},inOutExpo:function(a,
b,c,d){return 1>(a/=d/2)?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},inCirc:function(a,b,c,d){return c*(1-Math.sqrt(1-(a/=d)*a))+b},outCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},inOutCirc:function(a,b,c,d){return 1>(a/=d/2)?c/2*(1-Math.sqrt(1-a*a))+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},inQuad:function(a,b,c,d){return c*(a/=d)*a+b},outQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},inOutQuad:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},inBack:function(a,
b,c,d){return c*(a/=d)*a*((O+1)*a-O)+b},outBack:function(a,b,c,d){return c*((a=a/d-1)*a*((O+1)*a+O)+1)+b},inOutBack:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*(((O*=1.525)+1)*a-O)+b:c/2*((a-=2)*a*(((O*=1.525)+1)*a+O)+2)+b}};
j.cssease={linear:"linear",inCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",outCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",inOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",inQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",outQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",inOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",inQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",outQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",inOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",inSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",
outSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",inOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",inExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",outExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",inOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",inCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",outCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",inOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",inQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",outQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",
inOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",inBack:["cubic-bezier(0.600, 0, 0.735, 0.045)","cubic-bezier(0.600, -0.280, 0.735, 0.045)"],outBack:["cubic-bezier(0.175, 0.885, 0.320, 1)","cubic-bezier(0.175, 0.885, 0.320, 1.275)"],inOutBack:["cubic-bezier(0.680, 0, 0.265, 1)","cubic-bezier(0.680, -0.550, 0.265, 1.550)"]};var P=ba(["animation","webkitAnimation"],"Animation"),Fa=P.pa,Ga=P.prefix,Ha=P.ba,Ia=P.ea,Q=P.sheet,R;
R=j.Animation=k(function(a,b,c){c=c||{};this.D=c.onComplete||z;this.a=a;R.id++;this.c="ciranim"+R.id;a=c.duration||R.duration;var d=c.ease||"ease",e,g={};for(e in b)g[e]=b[e],ia(g[e])&&(g[e]+="px");this.h=g;g=ga(ga(da(g),'"',""),",",";");Q.insertRule("@"+Ha+"keyframes "+this.c+"{to"+g+"}",Q.cssRules.length);ma(d)||(d=[d]);b=this.c;e=0;for(var g=d.length,h="";e<g;e++)h+=Ha+"animation:"+b+" "+a+"ms "+d[e]+" 0s 1 normal both;";Q.insertRule("."+b+"{"+h+"}",Q.cssRules.length);c.manual||this.start()},{Y:function(){J(this.a,
Ia+"End",this.end);J(this.a,"animationend",this.end)},dispose:function(){this.stop();this.b()},start:function(){function a(a){var d=Q.cssRules,e=d.length,g;b.Y();if("webkit"===Ga){for(;e--;)g=d[e].name||(""+d[e].selectorText).split(".")[1],g===b.c&&Q.deleteRule(e);H(b.a,b.c);K(b.a,b.h)}b.D(a)}var b=this;b.end=a;I(b.a,Ia+"End",a);I(b.a,"animationend",a);F(b.a,b.c)},stop:function(){var a={};a[Ha+"animation-play-state"]="paused";K(this.a,a);this.Y()}});R.id=0;R.duration=500;R.support=Fa;
var T=ba(["transitionProperty","webkitTransitionProperty"],"Transition"),Ja=T.pa,Ka=T.ba,La=T.ea,U=T.sheet,V;
V=j.Transition=k(function(a,b,c){c=c||{};c.onComplete=c.onComplete||z;V.id++;this.c="cirtrans"+V.id;var d=[];ea({},b);var e,g=c.duration||V.duration,h=c.ease||"ease";ma(h)||(h=[h]);for(e in b)d.push(e);e=0;for(var n=h.length,d=""+(Ka+"transition-property:"+d.join(" ")+";"+Ka+"transition-duration:"+g+"ms;");e<n;e++)d+=Ka+"transition-timing-function:"+h[e]+";";U.insertRule("."+this.c+"{"+d+"}",U.cssRules.length);this.a=a;this.h=b;this.Ra=c;c.manual||this.start()},{dispose:function(){this.stop();this.b()},
start:function(){var a=this;a.t=function(b){a.stop();setTimeout(function(){a.Ra.onComplete(b)},1)};I(a.a,La+"End",a.t);I(a.a,"transitionend",a.t);F(a.a,a.c);K(a.a,a.h)},stop:function(){var a=U.cssRules,b=a.length,c;J(this.a,La+"End",this.t);J(this.a,"transitionend",this.t);for(H(this.a,this.c);b--;)if(c=a[b].name||(""+a[b].selectorText).split(".")[1],c===this.c){U.deleteRule(b);break}}});V.id=0;V.support=Ja;V.duration=500;
var W=j.Tweener=k(function(a,b,c){var d;c=c||{};this.u=a;this.h=[];for(d in b)a=b[d],a.name=d,a.Ja=a.to-a.from,a.prefix=a.prefix||"",a.suffix=a.suffix||"px",this.h.push(a);this.W=c.duration||W.duration;this.Ka=c.ease||this.ta;this.D=c.onComplete;c.manual||this.start()},{dispose:function(){this.stop();this.b()},ta:function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b},Z:t.requestAnimationFrame?function(a){requestAnimationFrame(a)}:t.webkitRequestAnimationFrame?function(a){webkitRequestAnimationFrame(a)}:
t.mozRequestAnimationFrame?function(a){mozRequestAnimationFrame(a)}:t.oRequestAnimationFrame?function(a){oRequestAnimationFrame(a)}:t.msRequestAnimationFrame?function(a){msRequestAnimationFrame(a)}:function(a){setTimeout(a,1E3/W.Wa)},loop:function(){for(var a=this,b=W.F,c,d=u(),e,g=b.length,h;g--;)if(c=b[g],i=c.h.length,e=d-c.Ga,e<c.W)for(;i--;)h=c.h[i],W.aa(c.u,h,c.Ka(e,h.from,h.Ja,c.W));else{for(;i--;)h=c.h[i],W.aa(c.u,h,h.to);c.D&&c.D();b.splice(g,1)}if(b.length)return a.Z(function(){a.loop()}),
q;this.stop()},start:function(){var a=this;a.Ga=u();W.F.push(a);W.Q||(W.Q=1,a.Z(function(){a.loop()}))},stop:function(){W.F=[];clearInterval(W.Q);W.Q=A}});W.aa=function(a,b,c){a[b.name]=b.prefix+c+b.suffix};W.F=[];W.fps=30;W.duration=500;j.$=function(a,b){var c,d,e;b=b||D;ja(a)?c=b.querySelectorAll(a):(c=[a],a="");e=c.length;d=function(){};d.prototype=j.$.ka;d=new d;d.length=e;for(d.Aa=b;e--;)d[e]=c[e];return d};function X(a,b,c){var d=a.length;for(c=Ma(c);d--;)c[0]=a[d],b.apply(a,c);return a}
function Y(a,b,c){c=Ma(c);c[0]=a[0];return b.apply(A,c)}function Ma(a){var b=[A];b.push.apply(b,a);return b}
j.$.ka={ua:X,Ua:Y,Ta:Ma,querySelectorAll:function(a){return this[0].querySelectorAll(a)},find:function(a){return j.$(a,this.Aa)},parent:function(){return j.$(Aa(this[0]))},on:function(){return X(this,I,arguments)},off:function(){return X(this,J,arguments)},show:function(){return X(this,ta)},hide:function(){return X(this,ua)},opacity:function(){return X(this,va,arguments)},hasClass:function(){return Y(this,E,arguments)},addClass:function(){return X(this,F,arguments)},removeClass:function(){return X(this,
H,arguments)},toggleClass:function(){return X(this,qa,arguments)},css:function(){return X(this,K,arguments)},html:function(){return Y(this,Da,arguments)},attr:function(){return Y(this,ra,arguments)},removeAttr:function(){return X(this,sa,arguments)},append:function(){return X(this,r,arguments)},remove:function(){return X(this,Ca,arguments)}};
function Na(a,b,c,d,e){ka(c)&&(e=c,c=A);ka(d)&&!e&&(e=d,d=A);d&&(d=Oa[d]);c={duration:c,ease:d,onComplete:e};if(Pa)b=new Qa(a,b,c);else{d=j.Tweener;e=a.style;var g;a=wa(a);var h,n,v={};for(g in b)h=Ra(b[g]),n=a.getPropertyValue(g),n=!n||"none"===n?0:1*Ra(n)[2],v[g]={from:n,to:1*h[2]||0,prefix:h[1],suffix:h[3]};b=new d(e,v,c)}this.j.push(b)}function Ra(a){a=""+(a||"");return a.match(/^(.*?)([0-9\.]+)(.*)$/)}var Sa=j.$.ka,Qa=j.Animation||{},Pa=Qa.support,Oa={};
Pa&&j.cssease?Oa=j.cssease:j.ease&&(Oa=j.ease);Sa.animate=function(){this.j||(this.j=[]);return Sa.ua(this,Na,arguments)};Sa.stop=function(){if(this.j){for(var a=this.j.length;a--;)this.j[a].stop();this.j=A}return this};
j.HashQuery=k(p,{typeCast:function(a){var b=fa(a);return a===b&&(a=a.match("^[\"'](.*)[\"']$"))?a[1]:b},makeHash:function(a){var b="#"+a.mode;a=a.vars;var c="?",d;for(d in a)b+=c+d+"="+da(a[d]),c="&";return encodeURI(b)},setHash:function(a){location.hash=this.makeHash(a);return q},parseHash:function(a){var b,c,d,e;b=decodeURIComponent(a).split("#")[1];if(!b)return m;b=b.split("?");a=b[0];if(b[1]){c={};b=b[1].split("&");for(e=b.length;e--;)b[e]&&(d=b[e].split("="),c[d[0]]=this.typeCast(d[1]))}return{mode:a,
vars:c}},getHash:function(){return this.parseHash(location.hash)}});j.Embed=function(a){var b=l(a.type.toLowerCase());b.controls=a.controls?q:m;b.preload=a.preload||"auto";b.autoplay=a.autoplay?q:m;b.loop=a.loop?q:m;b.src=a.dir+a.name+"."+a.suffix[0][0];return b};j.Embed.supportcheck=L;
j.Media=k(function(a){this._super();var b=this,c=a.autoplay,d=a.loop,e,g=a.element||D.body;a.preload="auto";a.autoplay=a.loop=m;switch(a.type){case "Audio":e=j.Audio(a);break;case "Video":e=j.Video(a)}b.g=e;if(!e)return m;if(c){var h;h=this.contract(e,"canplay",function(){b.uncontract(h);b.play()})}d&&this.loop(q);a.oncanplay&&this.contract(e,"canplay",a.oncanplay);a.onended&&this.contract(e,"ended",a.onended);r(g,e)},{dispose:function(){Ca(this.g);this.b()},getElement:f("g"),getCurrent:function(){return this.g.currentTime},
getDuration:function(){return this.g.duration},setCurrent:function(a){this.g.currentTime=a},loop:function(a){var b=this;b.f&&(b.uncontract(b.f),delete b.f);a&&(b.f=b.contract(b.g,"ended",function(){b.stop();b.play()}))},play:function(){this.g.play()},pause:function(){this.g.pause()},stop:function(){this.setCurrent(0);this.pause()}});j.Media.supportcheck=L;j.Audio=function(a){a.type="Audio";a.suffix=j.Audio.support;return j.Embed(a)};
j.Audio.support=L({type:"Audio",suffix:[["mp3","mpeg"],["wav","wav"],["ogg","ogg"],["m4a","mp4"]]});j.Sound=function(a){a.type="Audio";return new j.Media(a)};j.Sound.support=j.Audio.support;j.Video=function(a){a.type="Video";a.suffix=j.Video.support;return new j.Embed(a)};j.Video.support=L({type:"Video",suffix:[["webm","webm"],["mp4","mp4"],["ogv","ogg"]]});j.Movie=function(a){a.type="Video";return new j.Media(a)};j.Movie.support=j.Video.support;
j.Ajax=k(function(a){a&&this.request(a)},{request:function(a){if("json"===a.dataType)return delete a.dataType,this.Xa(a);var b=a.url,c=a.callback||z,d=a.error||z,e=a.type||"GET",g="",h;h=this.ra=new XMLHttpRequest;a.cash||(a.query||(a.query={}),a.query["cir"+u()]="0");a.query&&(g=a.query,ha(g)&&(g=x(g),g=encodeURI(g)));h.onreadystatechange=function(){return 4!=h.readyState?m:200==h.status?c(h.responseText,h):d(h)};"GET"===e&&(b=-1!==b.indexOf("?")?b+"&":b+"?",b+=g,g="");h.open(e,b);"POST"===e&&h.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded");h.send(g)},abort:function(){this.ra&&this.ra.abort()},json:function(a){var b=a.callback,c=a.error;a.callback=function(a){b(s(a))};a.error=function(a){c&&c(a)};this.request(a)}});j.Bind=k(function(a){this.B=a;this.add()},{dispose:function(){this.remove();this.b()},getHandler:f("B"),add:function(){this.s(q)},remove:function(){this.s(m)},s:function(a){a=a?I:J;for(var b in this.B.events)a(this.B.element,b,this.B.events[b])}});
j.Brush=k(function(a){this.n=a.canvas;this.ca=this.n.getContext("2d");this.setSize(a)},{setSize:function(a){a.width&&(this.n.width=a.width);a.height&&(this.n.height=a.height)},pigment:function(a){var b=l("canvas"),c=l("img");c.onload=function(){b.width=a.width;b.height=a.height;b.getContext("2d").drawImage(c,0,0);a.onload(b,c)};c.src=a.src;return{image:b,x:a.x||0,y:a.y||0}},pigments:function(a,b){function c(a){var c=a.onload||z;a.onload=function(a,d){c(a,d);g--;0===g&&b(h)};h[e]=d.pigment(a);g++}
var d=this,e,g=0,h={};b=b||z;for(e in a)c(a[e]);return h},draw:function(a){var b=0,c=a.length,d;for(this.ca.clearRect(0,0,this.n.width,this.n.height);b<c;b++)d=a[b],this.ca.drawImage(d.image,d.x,d.y)}});j.Brush.support=!!t.HTMLCanvasElement;
j.DataStore=k(function(a){this._super(a);this.data={};return this.m("DataStore")},{set:function(a,b){this.data[a]=b},get:function(a){var b={},c;if(a)return this.data[a];for(c in this.data)b[c]=this.data[c];return b},remove:function(a){if(!this.data[a])return m;delete this.data[a]},reset:function(){this.data={}}});
j.WebStorage=k(function(a){this._super(a);this.l=a.namespace?a.namespace+"-":"";this.d=t[a.type.toLowerCase()+"Storage"];return this.m("WebStorage")},{set:function(a,b){this.d.setItem(this.l+a,da(b));return q},get:function(a){var b={},c;if(a)return s(this.d.getItem(this.l+a));for(c in this.d)this.l?(a=c.split(this.l)[1])&&(b[a]=s(this.d[c])):b[c]=s(this.d[c]);return b},remove:function(a){a=this.l+a;if(!this.d.getItem(a))return m;this.d.removeItem(a);return q},reset:function(){if(!this.l)return this.d.clear(),
q;for(var a in this.d)this.remove(a)}});j.LocalStorage=function(a){a=a||{};a.type="Local";return new j.WebStorage(a)};j.SessionStorage=function(a){a=a||{};a.type="Session";return new j.WebStorage(a)};j.Deferred=k(function(){this.q=[]},{isResolve:function(){return!this.q},resolve:function(a){if(this.isResolve())return this;var b=this.q,c=b.length,d=0;this.q=A;for(this.data=a;d<c;++d)b[d](a);return this},done:function(a){this.q?this.q.push(a):a(this.data);return this}});
j.DragFlick=k(function(a){this._super();a&&this.bind(a)},{I:function(a){return a.changedTouches?a.changedTouches[0]:a},amount:function(a){var b=this,c,d,e=m;this.contract(a.element,N.switchdown,function(a){var h=b.I(a);c=h.pageX;d=h.pageY;e=q;oa(a)});this.contract(t,N.switchup,function(g){e&&(g=b.I(g),a.callback({x:g.pageX-c,y:g.pageY-d}),e=m)})},direction:function(a){this.amount({element:a.element,callback:function(b){var c=a.boundary||0,d={change:m,top:m,right:m,bottom:m,left:m,amount:b};Math.abs(b.x)>
c&&(0<b.x?d.right=q:0>b.x&&(d.left=q),d.change=q);Math.abs(b.y)>c&&(0<b.y?d.bottom=q:0>b.y&&(d.top=q),d.change=q);a.callback(d)}})},bind:function(a){function b(a,b,d){c.contract(a,b,function(a){d(c.I(a))})}var c=this,d=a.element,e=a.start||z,g=a.move||z,h=a.end||z,n=m,v=0,G=0;a.direction&&c.direction({element:d,boundary:a.boundary,callback:a.direction});b(d,N.switchdown,function(a){n=q;v=a.pageX;G=a.pageY;e({e:a,move:{x:v,y:G}})});b(D,N.switchmove,function(a){n&&g({e:a,move:{x:a.pageX-v,y:a.pageY-
G}})});b(D,N.switchup,function(a){n&&(h({e:a,move:{x:a.pageX-v,y:a.pageY-G}}),n=m)})}});j.ExternalInterface=function(a){a=a||{};var b=j.ExternalInterface,c;if(a.single&&b.o)return b.o;c=a.android?new b.Android(a):new b.IOS(a);a.single&&(b.o=c);return c};
j.ExternalInterface.Android=aa(j.HashQuery,function(a){a=a||{};this.Ea=a.android;this.fa=a.externalObj},{call:function(a){this.Ea[a.mode](this.makeHash(a))},addCallback:function(a,b){var c=this;c.fa[a]=function(a){a=c.parseHash(a);return b(a.vars)}},removeCallback:function(a){delete this.fa[a]}});
j.ExternalInterface.IOS=aa(j.HashQuery,function(){this.p={}},{dispose:function(){for(var a in this.p)this.removeCallback(a);this.b()},call:function(a){this.setHash(a)},addCallback:function(a,b){var c=this;c.p[a]=function(){var d=c.getHash();return d.mode===a?(b(d.vars),q):m};I(t,"hashchange",c.p[a])},removeCallback:function(a){J(t,"hashchange",this.p[a]);delete this.p[a]}});
j.Facebook=k(p,{shareURL:function(a){var b="https://www.facebook.com/dialog/feed?app_id="+a.app_id+"&redirect_uri="+a.redirect_uri;return b+=x({link:a.link,picture:a.picture,name:a.name,caption:a.caption,description:a.description})}});
j.FPS=k(function(a){this._super(a);this.P=this.w=a.criterion||20;this.La=a.enterframe;this.la=this.X(this.w);this.M=this.K=this.f=0;a.manual||this.start();return this.m("FPS")},{dispose:function(){this.stop();this.b()},getCriterion:f("w"),getSurver:f("P"),getFrameTime:f("la"),enter:function(){this.La({criterion:this.w,surver:this.P})},start:function(){this.M=u();this.f=setInterval(this.wa,this.la,this)},wa:function(a){a.K=u();a.P=a.X(a.K-a.M);a.M=a.K;a.enter()},X:function(a){return Math.round(1E3/
a)},stop:function(){clearInterval(this.f)}});
j.ImgLoad=k(function(a){this._super();this.na=a.srcs;this.O=this.na.length;this.ha=[];this.A=[];this.ya=a.onload||z;this.za=a.onprogress||z;this.N=this.J=0;this.oa=m;a.manual||this.start()},{sa:function(){this.J++;this.N=this.J/this.O;this.za(this.N);if(this.J>=this.O){for(var a=this.A.length;a--;)this.uncontract(this.A[a]);this.A=[];this.ya(this.ha)}},start:function(){function a(){b.sa()}if(this.oa)return m;this.oa=q;for(var b=this,c,d=b.O;d--;)c=l("img"),c.src=b.na[d],b.A.push(b.contract(c,N.load,
a)),b.ha.push(c)},getProgress:f("N")});j.WindowLoad=k(function(a){this._super();if(a)this.onload(a.onload)},{onload:function(a){var b=this,c;c=this.contract(t,N.load,function(){b.uncontract(c);a()})}});
j.Mobile=k(function(){this._super()},{getZoom:function(){return D.body.clientWidth/t.innerWidth},isAndroid:function(a){return B(/Android/i,a)},isIOS:function(a){return B(/iPhone|iPad|iPod/i,a)},isWindows:function(a){return B(/IEMobile/i,a)},isFBAPP:function(a){return B(/FBAN/,a)},isMobile:function(){return this.isAndroid()||this.isIOS()||this.isWindows()||this.isFBAPP()},killScroll:function(a){if(this.C)return m;a||w();this.C=this.contract(D,N.touchmove,oa)},revivalScroll:function(a){if(!this.C)return m;
a||w();this.uncontract(this.C);delete this.C},hideAddress:function(){function a(){0===t.pageYOffset&&w()}function b(){setTimeout(a,100)}this.contract(t,N.load,b,m);this.contract(t,Ea,b,m)},getOrientation:function(){return 90!==Math.abs(t.orientation)&&t.innerWidth<t.innerHeight?{portrait:q,landscape:m}:{portrait:m,landscape:q}},bindOrientation:function(a){function b(a){h.push(g.contract(t,N.load,a));h.push(g.contract(t,Ea,a));h.push(g.contract(t,N.resize,a))}function c(){for(var a=h.length;a--;)g.uncontract(h[a]);
h=[]}function d(){e();c()}function e(){if(g.getOrientation().portrait)return a.portrait(),q;a.landscape()}var g=this,h=[];a.immediately&&e();if(a.one)return b(d),function(){c()};b(e);return function(){c()}}});j.mobile=new j.Mobile;j.T=k(function(a){this._super();this.s=a.e;a.callback&&this.bind(a.callback)},{bind:function(a){this.unbind();this.U=this.contract(t,this.s,a)},unbind:function(){this.U&&this.uncontract(this.U)}});j.DeviceOrientation=function(a){a=a||{};a.e="deviceorientation";return new j.T(a)};
j.DeviceOrientation.support="ondeviceorientation"in t;j.DeviceMotion=function(a){a=a||{};a.e="devicemotion";return new j.T(a)};j.DeviceMotion.support="ondevicemotion"in t;var Va,Wa;j.DeviceOrientation.support?(Va=j.DeviceOrientation,Wa=function(a){return a}):j.DeviceMotion.support&&(Va=j.DeviceMotion,Wa=function(a){return a.rotationRate});
j.DeviceShake=k(function(a){this._super();this.H=new Va;this.va=a.limit;this.Da=a.waittime;a.callback&&a.direction&&this.bind(a.direction,a.callback)},{Ha:{x:"gamma",y:"beta",z:"alpha"},dispose:function(){this.H.dispose();this.b()},bind:function(a,b){a=this.Ha[a];var c=this,d;return c.H.bind(function(e){e=Wa(e);d||(d=e);Math.abs(e[a]-d[a])>c.va&&(d=A,b(e),setTimeout(function(){},c.Da))})},unbind:function(){this.H.unbind()}});j.DeviceShake.support=Va?q:m;
j.FontImg=k(function(a){a=a||{};this.type=a.type?a.type+"_":"";this.qa=a.tag||"span"},{make:function(a){a=(""+a).split("");for(var b="",c=a.length;c--;)b="<"+this.qa+' class="font_'+this.type+a[c]+'">&nbsp;</'+this.qa+">"+b;return b}});
j.Observer=k(function(a){this._super(a);this.L={};return this.m("Observer")},{on:function(a,b){var c=this.L;c[a]||(c[a]=[]);c[a].push(b)},one:function(a,b){function c(e){b(e);d.off(a,c)}var d=this;d.on(a,c)},off:function(a,b){var c=this.L;if(!b)return delete c[a],q;var d=c[a],e;if(!d)return m;for(e=d.length;e--;)if(b===d[e])return d.splice(e,1),0===d.length&&delete c[a],q;return m},fire:function(a,b){var c=this.L[a],d,e;if(!c)return m;for(e=c.length;e--;)(d=c[e])&&d(b);return q}});
j.PreRender=k(function(a){a=a||{};a.loopblur||(a.loopblur=20);this.i=a.elements||[];this.ga=a.guesslimit||30;this.Qa=a.onrendered||z;this.ja=a.looptime||100;this.Pa=this.ja+a.loopblur;a.manual||this.start()},{dispose:function(){clearInterval(this.f);this.b()},start:function(){var a,b=this,c=u();for(a=b.i.length;a--;)ta(b.i[a]);b.f=setInterval(function(){var a=u(),e=a-c;c=a;if(e<b.Pa&&(b.ga--,1>b.ga)){clearInterval(b.f);for(a=b.i.length;a--;)ua(b.i[a]);b.Qa()}},this.ja,this)}});
j.Route=k(function(a){this._super(a);this.u=a.target||"";this.xa=a.noregex;this.r=a.action;a.manual||this.start();return this.m("Route")},{start:function(){this.fire(this.u)},fire:function(a){var b;if(this.xa&&this.r[a])return this.r[a](a);for(b in this.r)if(a.match(b))this.r[b](b)}});
j.ScriptLoad=k(function(){this._super();this.i=[]},{requests:function(a,b){function c(c){var g=a[c].callback;a[c].callback=function(a){g(a);e--;0===e&&b(d.i)};d.request(a[c])}for(var d=this,e=0,g=a.length;e<g;e++)c(e)},request:function(a){var b=this,c=l("script"),d;c.src=a.src;r(D.body,c);b.i.push(c);a.callback&&(d=b.contract(c,N.load,function(){b.uncontract(d);a.callback.apply(this,arguments)}))}});function Z(a){return Xa?$.getResponseHeader(a):m}
function Ya(a){var b=new XMLHttpRequest;b.onload=function(){a(b)};b.open("HEAD",location.href+"?update"+u()+"=1");b.send(A);return b}var $,Xa=m;
j.ServerMeta=k(function(a){a=a||{};var b=a.callback||z;$?b($):$=Ya(function(){Xa=q;b($)})},{date:function(a){return Ya(function(b){b=new Date(b.getResponseHeader("Date"));a(b)})},connection:function(){return Z("Connection")},contentLength:function(){return Z("Content-Length")},lastModified:function(){return Z("Last-Modified")},server:function(){return Z("Server")},contentType:function(){return Z("Content-Type")},acceptRanges:function(){return Z("Accept-Ranges")},keepAlive:function(){return Z("Keep-Alive")}});
j.Surrogate=k(function(a){this.Ia=a.delay;this.v=a.callback},{dispose:function(){this.clear();this.b()},request:function(a){this.Fa=a;this.clear();this.S=setTimeout(this.flush,this.Ia,this)},flush:function(a){a=a||this;a.v(a.Fa)},clear:function(){clearInterval(this.S)}});
j.Throttle=k(function(a){this.Sa=a.waittime;this.v=a.callback},{dispose:function(){this.unlock();this.b()},request:function(a){var b=this;if(b.ia)return b.R=a,m;b.v(a);b.lock();b.S=setTimeout(function(){b.R&&(b.v(b.R),b.R=A);b.unlock()},b.Sa,b)},lock:function(){this.ia=q},unlock:function(a){a=a||this;a.ia=m;clearInterval(a.S)}});
j.Timer=function(a){function b(){S=u();var a=g-(S-ya)/1E3;0>a&&(a=0);Ba=c(a);v(Ba);if(S>za)return Ta.stop(),G(),q;Ua=setTimeout(b,n);return m}function c(a){var b;b=(""+a).split(".");a=b[0];b=b[1]?b[1]:"";a=d({ma:a,da:xa.Na});b=d({ma:b,da:xa.Ma,Oa:q});return a+"."+b}function d(a){var b=""+a.ma,c=a.da,d=c-b.length;return!a.Oa?-1<d?e(d,0)+b:e(c,9):0<d?b+e(d,0):b.slice(0,c)}function e(a,b){var c="";for(b=""+b;0<a;)c+=b,a--;return c}var g=a.limit,h=1E3*g,n=1E3*a.interval,v=a.onupdate,G=a.ontimeup,xa;a=
a.template.split(".");xa={Na:a[0].length,Ma:a[1].length};var ya=0,S=0,za=h,Ba=c(g),Ua,Ta={getLimit:function(){return g},getTime:function(){return Ba},getProgress:function(){return 1-(za-S)/h},setUpdate:function(a){v=a},setTimeup:function(a){G=a},countDown:function(){S=ya=u();za=ya+h;b()},stop:function(){clearInterval(Ua)}};return Ta};
j.Twitter=k(p,{shareURL:function(a){var b=a.caption||"",c=a.name,d=a.hash;return a="https://twitter.com/intent/tweet?"+x({url:a.redirect_uri,text:b+(c?" \u300c"+c+"\u300d":"")+(d?" "+d:"")})}});j.XML=k(function(a){this.a=l("div");this.V={};a&&this.setData(a.data)},{getData:f("V"),setData:function(a){this.V=a;Da(this.a,a)},$:function(a){return this.a.querySelector(a)},$$:function(a){return pa(a,this.a)}});
}());
